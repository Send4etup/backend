2025-11-20 20:13:07 | INFO     | tovarishbot | üöÄ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ. –§–∞–π–ª: logs\tovarishbot_20251120.log
2025-11-20 20:13:08 | INFO     | tovarishbot | üöÄ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ. –§–∞–π–ª: logs\tovarishbot_20251120.log
2025-11-20 20:13:08 | INFO     | app.startup | üöÄ Starting –¢–æ–≤–∞—Ä–∏—â–ë–æ—Ç API...
2025-11-20 20:13:08 | INFO     | app.services.telegram_validator | Telegram validator initialized
2025-11-20 20:13:08 | INFO     | app.services.telegram_validator | Telegram validator initialized globally
2025-11-20 20:13:08 | INFO     | app.startup | ‚úÖ Telegram validator initialized successfully
2025-11-20 20:13:08 | INFO     | app.startup | üìÅ Upload directory ready: uploads
2025-11-20 20:13:08 | INFO     | app.database | Database tables created successfully
2025-11-20 20:13:08 | INFO     | app.startup | ‚úÖ Database initialized successfully
2025-11-20 20:13:08 | INFO     | app.services.ai.ai_service | AIService initialized with model: gpt-4o
2025-11-20 20:13:08 | INFO     | app.services.ai.audio_processor | FFmpeg is available
2025-11-20 20:13:08 | INFO     | app.services.ai.ai_service | All processors initialized successfully
2025-11-20 20:13:08 | INFO     | app.services.ai.ai_service | AIService instance created successfully
2025-11-20 20:13:08 | INFO     | app.services.ai.ai_service | Performing health check...
2025-11-20 20:13:10 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-20 20:13:10 | INFO     | app.services.ai.ai_service | Health check passed
2025-11-20 20:13:10 | INFO     | app.startup | ‚úÖ AI service is healthy
2025-11-20 20:13:10 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:13:10 | INFO     | app.startup | ‚úÖ ImageService initialized
2025-11-20 20:13:10 | INFO     | apscheduler.scheduler | Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-11-20 20:13:10 | INFO     | apscheduler.scheduler | Added job "Clean up old generated images" to job store "default"
2025-11-20 20:13:10 | INFO     | apscheduler.scheduler | Scheduler started
2025-11-20 20:13:10 | INFO     | app.tasks.image_cleanup_task | ‚úÖ Image cleanup scheduler started
   Schedule: Daily at 03:00
   Cleanup threshold: >30 days
2025-11-20 20:13:10 | INFO     | app.startup | ‚úÖ Image cleanup scheduler started
2025-11-20 20:13:10 | INFO     | app.startup | üéØ Environment: development
2025-11-20 20:13:10 | INFO     | app.startup | ‚úÖ Application startup completed successfully
2025-11-20 20:13:10 | INFO     | app.startup | üîê Security features enabled:
2025-11-20 20:13:10 | INFO     | app.startup |    - Telegram HMAC-SHA256 validation
2025-11-20 20:13:10 | INFO     | app.startup |    - JWT token authentication
2025-11-20 20:13:10 | INFO     | app.startup |    - CORS protection
2025-11-20 20:13:10 | INFO     | app.startup |    - Request rate limiting
2025-11-20 20:13:16 | INFO     | watchfiles.main | 1 change detected
2025-11-20 20:13:22 | INFO     | watchfiles.main | 1 change detected
2025-11-20 20:13:25 | INFO     | watchfiles.main | 1 change detected
2025-11-20 20:13:28 | INFO     | watchfiles.main | 1 change detected
2025-11-20 20:13:30 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:13:30 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:13:30 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:13:30 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:13:30 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:13:30 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:13:30 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:13:30 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:13:30 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:13:30 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:13:30 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:13:30 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:13:30 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:13:30 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:13:30 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:13:30 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:13:30 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:13:30 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:13:30 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:13:30 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:13:30 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:13:30 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:13:30 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:13:30 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:13:30 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:13:30 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:13:30 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:13:30 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:13:30 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:13:30 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:13:30 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:13:30 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:13:30 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:13:30 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:13:30 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:13:30 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:13:30 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:13:30 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:13:30 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:13:30 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:13:30 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:13:30 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:13:30 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:13:30 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:13:30 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:13:30 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:13:30 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:13:30 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:13:30 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:13:30 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:13:30 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:13:30 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:13:30 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:13:30 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:13:30 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:13:30 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:13:30 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:13:30 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:13:30 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:13:30 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:13:30 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:13:30 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:13:30 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:13:30 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:13:30 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:13:30 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:13:30 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 20:13:30 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:13:30 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:13:30 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:13:30 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:13:30 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:13:30 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:13:30 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 20:13:31 | INFO     | watchfiles.main | 1 change detected
2025-11-20 20:13:46 | INFO     | watchfiles.main | 2 changes detected
2025-11-20 20:13:46 | INFO     | watchfiles.main | 1 change detected
2025-11-20 20:14:12 | INFO     | watchfiles.main | 4 changes detected
2025-11-20 20:14:12 | INFO     | app.startup | üõë Shutting down –¢–æ–≤–∞—Ä–∏—â–ë–æ—Ç Backend...
2025-11-20 20:14:12 | INFO     | app.tasks.image_cleanup_task | ‚úÖ Image cleanup scheduler stopped
2025-11-20 20:14:12 | INFO     | app.startup | ‚úÖ Image cleanup scheduler stopped
2025-11-20 20:14:12 | INFO     | app.startup | ‚úÖ –¢–æ–≤–∞—Ä–∏—â–ë–æ—Ç Backend shutdown complete!
2025-11-20 20:14:12 | INFO     | apscheduler.scheduler | Scheduler has been shut down
2025-11-20 20:14:12 | INFO     | watchfiles.main | 2 changes detected
2025-11-20 20:14:13 | INFO     | watchfiles.main | 1 change detected
2025-11-20 20:14:13 | INFO     | tovarishbot | üöÄ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ. –§–∞–π–ª: logs\tovarishbot_20251120.log
2025-11-20 20:14:13 | INFO     | app.startup | üöÄ Starting –¢–æ–≤–∞—Ä–∏—â–ë–æ—Ç API...
2025-11-20 20:14:13 | INFO     | app.services.telegram_validator | Telegram validator initialized
2025-11-20 20:14:13 | INFO     | app.services.telegram_validator | Telegram validator initialized globally
2025-11-20 20:14:13 | INFO     | app.startup | ‚úÖ Telegram validator initialized successfully
2025-11-20 20:14:13 | INFO     | app.startup | üìÅ Upload directory ready: uploads
2025-11-20 20:14:13 | INFO     | app.database | Database tables created successfully
2025-11-20 20:14:13 | INFO     | app.startup | ‚úÖ Database initialized successfully
2025-11-20 20:14:14 | INFO     | app.services.ai.ai_service | AIService initialized with model: gpt-4o
2025-11-20 20:14:14 | INFO     | app.services.ai.audio_processor | FFmpeg is available
2025-11-20 20:14:14 | INFO     | app.services.ai.ai_service | All processors initialized successfully
2025-11-20 20:14:14 | INFO     | app.services.ai.ai_service | AIService instance created successfully
2025-11-20 20:14:14 | INFO     | app.services.ai.ai_service | Performing health check...
2025-11-20 20:14:17 | INFO     | tovarishbot | üöÄ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ. –§–∞–π–ª: logs\tovarishbot_20251120.log
2025-11-20 20:14:19 | INFO     | tovarishbot | üöÄ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ. –§–∞–π–ª: logs\tovarishbot_20251120.log
2025-11-20 20:14:19 | INFO     | app.startup | üöÄ Starting –¢–æ–≤–∞—Ä–∏—â–ë–æ—Ç API...
2025-11-20 20:14:19 | INFO     | app.services.telegram_validator | Telegram validator initialized
2025-11-20 20:14:19 | INFO     | app.services.telegram_validator | Telegram validator initialized globally
2025-11-20 20:14:19 | INFO     | app.startup | ‚úÖ Telegram validator initialized successfully
2025-11-20 20:14:19 | INFO     | app.startup | üìÅ Upload directory ready: uploads
2025-11-20 20:14:19 | INFO     | app.database | Database tables created successfully
2025-11-20 20:14:19 | INFO     | app.startup | ‚úÖ Database initialized successfully
2025-11-20 20:14:19 | INFO     | app.services.ai.ai_service | AIService initialized with model: gpt-4o
2025-11-20 20:14:19 | INFO     | app.services.ai.audio_processor | FFmpeg is available
2025-11-20 20:14:19 | INFO     | app.services.ai.ai_service | All processors initialized successfully
2025-11-20 20:14:19 | INFO     | app.services.ai.ai_service | AIService instance created successfully
2025-11-20 20:14:19 | INFO     | app.services.ai.ai_service | Performing health check...
2025-11-20 20:14:20 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-20 20:14:20 | INFO     | app.services.ai.ai_service | Health check passed
2025-11-20 20:14:20 | INFO     | app.startup | ‚úÖ AI service is healthy
2025-11-20 20:14:20 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:14:20 | INFO     | app.startup | ‚úÖ ImageService initialized
2025-11-20 20:14:20 | INFO     | apscheduler.scheduler | Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-11-20 20:14:20 | INFO     | apscheduler.scheduler | Added job "Clean up old generated images" to job store "default"
2025-11-20 20:14:20 | INFO     | apscheduler.scheduler | Scheduler started
2025-11-20 20:14:20 | INFO     | app.tasks.image_cleanup_task | ‚úÖ Image cleanup scheduler started
   Schedule: Daily at 03:00
   Cleanup threshold: >30 days
2025-11-20 20:14:20 | INFO     | app.startup | ‚úÖ Image cleanup scheduler started
2025-11-20 20:14:20 | INFO     | app.startup | üéØ Environment: development
2025-11-20 20:14:20 | INFO     | app.startup | ‚úÖ Application startup completed successfully
2025-11-20 20:14:20 | INFO     | app.startup | üîê Security features enabled:
2025-11-20 20:14:20 | INFO     | app.startup |    - Telegram HMAC-SHA256 validation
2025-11-20 20:14:20 | INFO     | app.startup |    - JWT token authentication
2025-11-20 20:14:20 | INFO     | app.startup |    - CORS protection
2025-11-20 20:14:20 | INFO     | app.startup |    - Request rate limiting
2025-11-20 20:14:22 | INFO     | watchfiles.main | 1 change detected
2025-11-20 20:14:23 | INFO     | watchfiles.main | 1 change detected
2025-11-20 20:14:25 | INFO     | watchfiles.main | 1 change detected
2025-11-20 20:14:26 | INFO     | watchfiles.main | 1 change detected
2025-11-20 20:14:27 | INFO     | watchfiles.main | 1 change detected
2025-11-20 20:14:28 | INFO     | watchfiles.main | 1 change detected
2025-11-20 20:14:29 | INFO     | watchfiles.main | 1 change detected
2025-11-20 20:14:29 | INFO     | watchfiles.main | 1 change detected
2025-11-20 20:14:31 | INFO     | watchfiles.main | 1 change detected
2025-11-20 20:14:33 | INFO     | watchfiles.main | 1 change detected
2025-11-20 20:14:34 | INFO     | watchfiles.main | 1 change detected
2025-11-20 20:14:35 | INFO     | watchfiles.main | 1 change detected
2025-11-20 20:14:38 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:14:38 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:14:38 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:14:38 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:14:38 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:14:38 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:14:38 | INFO     | app.services.chat_service | Chat created: 30e7869c-bc84-4612-9d4b-ef863b8e0e59 for user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:14:38 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:14:38 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:14:38 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:14:38 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:14:38 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:14:38 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:14:38 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 0 messages
2025-11-20 20:14:38 | INFO     | tovarishbot | send result
2025-11-20 20:14:38 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:14:38 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:14:38 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:14:38 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:14:38 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:14:38 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:14:38 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 0 messages
2025-11-20 20:14:38 | INFO     | tovarishbot | send result
2025-11-20 20:14:38 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 20:14:40 | INFO     | watchfiles.main | 1 change detected
2025-11-20 20:14:44 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:14:44 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:14:44 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:14:44 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:14:44 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:14:44 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:14:44 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:14:44 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:14:44 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:14:44 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:14:44 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:14:44 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:14:44 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:14:44 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:14:44 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:14:44 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:14:44 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:14:44 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:14:44 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:14:44 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:14:44 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:14:44 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:14:44 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:14:44 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:14:44 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:14:44 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:14:44 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:14:44 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:14:44 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:14:44 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:14:44 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:14:44 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:14:44 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:14:44 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:14:44 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:14:44 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:14:44 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:14:44 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:14:44 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:14:44 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:14:44 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:14:44 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:14:44 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:14:44 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:14:44 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:14:44 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:14:44 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:14:44 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:14:44 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:14:44 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:14:44 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:14:44 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:14:44 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:14:44 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:14:44 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 20:14:44 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:14:44 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:14:44 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:14:44 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:14:44 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:14:44 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:14:44 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:14:44 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:14:44 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:14:44 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:14:44 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:14:44 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:14:44 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:14:44 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:14:44 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:14:44 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:14:44 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:14:44 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:14:44 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 20:14:47 | INFO     | watchfiles.main | 1 change detected
2025-11-20 20:14:54 | INFO     | watchfiles.main | 4 changes detected
2025-11-20 20:14:54 | INFO     | app.startup | üõë Shutting down –¢–æ–≤–∞—Ä–∏—â–ë–æ—Ç Backend...
2025-11-20 20:14:54 | INFO     | app.tasks.image_cleanup_task | ‚úÖ Image cleanup scheduler stopped
2025-11-20 20:14:54 | INFO     | app.startup | ‚úÖ Image cleanup scheduler stopped
2025-11-20 20:14:54 | INFO     | app.startup | ‚úÖ –¢–æ–≤–∞—Ä–∏—â–ë–æ—Ç Backend shutdown complete!
2025-11-20 20:14:54 | INFO     | apscheduler.scheduler | Scheduler has been shut down
2025-11-20 20:14:55 | INFO     | watchfiles.main | 2 changes detected
2025-11-20 20:14:55 | INFO     | watchfiles.main | 1 change detected
2025-11-20 20:14:57 | INFO     | watchfiles.main | 4 changes detected
2025-11-20 20:14:58 | INFO     | watchfiles.main | 1 change detected
2025-11-20 20:14:59 | INFO     | tovarishbot | üöÄ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ. –§–∞–π–ª: logs\tovarishbot_20251120.log
2025-11-20 20:14:59 | INFO     | app.startup | üöÄ Starting –¢–æ–≤–∞—Ä–∏—â–ë–æ—Ç API...
2025-11-20 20:14:59 | INFO     | app.services.telegram_validator | Telegram validator initialized
2025-11-20 20:14:59 | INFO     | app.services.telegram_validator | Telegram validator initialized globally
2025-11-20 20:14:59 | INFO     | app.startup | ‚úÖ Telegram validator initialized successfully
2025-11-20 20:14:59 | INFO     | app.startup | üìÅ Upload directory ready: uploads
2025-11-20 20:14:59 | INFO     | app.database | Database tables created successfully
2025-11-20 20:14:59 | INFO     | app.startup | ‚úÖ Database initialized successfully
2025-11-20 20:14:59 | INFO     | watchfiles.main | 5 changes detected
2025-11-20 20:14:59 | INFO     | app.services.ai.ai_service | AIService initialized with model: gpt-4o
2025-11-20 20:14:59 | INFO     | app.services.ai.audio_processor | FFmpeg is available
2025-11-20 20:14:59 | INFO     | app.services.ai.ai_service | All processors initialized successfully
2025-11-20 20:14:59 | INFO     | app.services.ai.ai_service | AIService instance created successfully
2025-11-20 20:14:59 | INFO     | app.services.ai.ai_service | Performing health check...
2025-11-20 20:15:00 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-20 20:15:00 | INFO     | app.services.ai.ai_service | Health check passed
2025-11-20 20:15:00 | INFO     | app.startup | ‚úÖ AI service is healthy
2025-11-20 20:15:00 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:15:00 | INFO     | app.startup | ‚úÖ ImageService initialized
2025-11-20 20:15:00 | INFO     | apscheduler.scheduler | Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-11-20 20:15:00 | INFO     | apscheduler.scheduler | Added job "Clean up old generated images" to job store "default"
2025-11-20 20:15:00 | INFO     | apscheduler.scheduler | Scheduler started
2025-11-20 20:15:00 | INFO     | app.tasks.image_cleanup_task | ‚úÖ Image cleanup scheduler started
   Schedule: Daily at 03:00
   Cleanup threshold: >30 days
2025-11-20 20:15:00 | INFO     | app.startup | ‚úÖ Image cleanup scheduler started
2025-11-20 20:15:00 | INFO     | app.startup | üéØ Environment: development
2025-11-20 20:15:00 | INFO     | app.startup | ‚úÖ Application startup completed successfully
2025-11-20 20:15:00 | INFO     | app.startup | üîê Security features enabled:
2025-11-20 20:15:00 | INFO     | app.startup |    - Telegram HMAC-SHA256 validation
2025-11-20 20:15:00 | INFO     | app.startup |    - JWT token authentication
2025-11-20 20:15:00 | INFO     | app.startup |    - CORS protection
2025-11-20 20:15:00 | INFO     | app.startup |    - Request rate limiting
2025-11-20 20:15:01 | INFO     | watchfiles.main | 1 change detected
2025-11-20 20:24:20 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:24:20 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:24:20 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:24:20 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:24:20 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:24:20 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:24:20 | INFO     | app.services.chat_service | Chat created: f26bd846-3685-43df-a08d-5f5587251fdb for user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:24:20 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:24:20 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:24:20 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:24:20 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:24:20 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:24:21 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:24:21 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 0 messages
2025-11-20 20:24:21 | INFO     | tovarishbot | send result
2025-11-20 20:24:21 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:24:21 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:24:21 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:24:21 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:24:21 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:24:21 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:24:21 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 0 messages
2025-11-20 20:24:21 | INFO     | tovarishbot | send result
2025-11-20 20:24:21 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 20:25:15 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:25:15 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:25:15 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:25:15 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:25:15 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:25:15 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:25:15 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:25:15 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:25:15 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:25:15 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:25:15 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:25:15 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:25:15 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:25:15 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:25:15 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:25:15 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:25:15 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:25:15 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:25:15 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:25:15 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:25:15 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:25:15 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:25:15 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:25:15 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:25:15 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:25:15 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:25:15 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:25:15 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:25:15 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:25:15 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:25:15 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:25:15 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:25:15 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:25:15 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:25:15 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:25:15 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:25:15 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:25:15 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:25:15 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:25:15 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:25:15 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:25:15 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:25:15 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:25:15 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:25:15 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:25:15 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:25:15 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:25:15 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:25:15 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:25:15 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:25:15 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:25:15 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:25:15 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:25:15 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:25:15 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:25:15 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:25:15 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:25:15 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:25:15 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:25:15 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:25:15 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:25:15 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:25:15 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:25:15 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:25:15 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:25:15 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:25:15 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:25:15 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:25:15 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:25:15 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:25:15 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:25:15 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:25:15 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 20:25:28 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:25:28 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:25:28 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:25:28 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:25:28 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:25:28 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:25:28 | INFO     | app.services.chat_service | Chat created: 9c129a8f-2bef-487a-8fc3-92d53e76f766 for user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:25:28 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:25:28 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:25:28 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:25:28 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:25:28 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:25:28 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:25:28 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 0 messages
2025-11-20 20:25:28 | INFO     | tovarishbot | send result
2025-11-20 20:25:28 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:25:28 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:25:28 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:25:28 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:25:28 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:25:28 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:25:28 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 0 messages
2025-11-20 20:25:28 | INFO     | tovarishbot | send result
2025-11-20 20:25:28 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 20:25:29 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:25:29 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:25:29 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:25:29 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:25:29 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:25:29 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:25:29 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:25:29 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:25:29 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:25:29 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:25:29 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:25:29 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:25:29 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:25:29 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:25:29 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:25:29 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:25:29 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:25:29 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:25:29 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:25:29 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:25:29 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:25:29 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:25:29 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:25:29 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:25:29 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:25:29 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:25:29 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:25:29 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:25:29 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:25:29 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:25:29 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:25:29 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:25:29 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:25:29 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:25:29 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:25:29 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:25:29 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:25:29 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:25:29 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:25:29 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:25:29 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:25:29 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:25:29 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:25:29 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:25:29 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:25:29 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:25:29 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:25:29 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:25:29 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 20:25:29 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:25:29 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:25:29 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:25:29 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:25:29 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:25:29 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:25:29 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:25:29 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:25:29 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:25:29 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:25:29 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:25:29 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:25:29 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:25:29 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:25:29 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:25:29 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:25:29 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:25:29 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:25:29 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:25:29 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:25:29 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:25:29 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:25:29 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:25:29 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:25:29 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 20:26:16 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:26:16 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:26:16 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:26:16 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:26:16 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:26:16 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:26:16 | INFO     | app.services.chat_service | Chat created: b1bc2e8c-5822-4534-afd6-73f4fdb4427a for user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:26:16 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:26:16 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:26:16 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:26:16 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:26:16 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:26:16 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:26:16 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 0 messages
2025-11-20 20:26:16 | INFO     | tovarishbot | send result
2025-11-20 20:26:16 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:26:16 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:26:16 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:26:16 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:26:16 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:26:16 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:26:16 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 0 messages
2025-11-20 20:26:16 | INFO     | tovarishbot | send result
2025-11-20 20:26:16 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 20:26:34 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:26:34 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:26:34 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:26:34 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:26:34 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:26:34 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:26:34 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:26:34 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:26:34 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:26:34 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:26:34 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:26:34 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:26:34 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:26:34 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:26:34 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:26:34 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:26:34 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:26:34 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:26:35 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:26:35 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:26:35 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:26:35 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:26:35 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:26:35 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:26:35 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:26:35 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:26:35 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:26:35 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:26:35 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:26:35 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:26:35 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:26:35 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:26:35 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:26:35 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:26:35 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:26:35 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:26:35 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:26:35 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:26:35 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:26:35 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:26:35 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:26:35 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:26:35 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 20:26:35 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:26:35 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:26:35 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:26:35 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:26:35 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:26:35 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:26:35 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:26:35 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:26:35 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:26:35 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:26:35 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:26:35 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:26:35 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:26:35 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:26:35 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:26:35 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:26:35 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:26:35 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:26:35 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:26:35 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:26:35 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:26:35 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:26:35 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:26:35 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:26:35 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:26:35 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:26:35 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:26:35 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:26:35 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:26:35 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:26:35 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 20:27:27 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:27:27 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:27:27 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:27:27 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:27:27 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:27:27 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:27:27 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:27:27 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:27:27 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:27:27 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:27:27 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:27:27 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:27:27 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:27:27 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:27:27 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:27:27 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:27:27 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:27:27 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:27:27 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:27:27 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:27:27 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:27:27 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:27:27 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:27:27 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:27:27 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:27:27 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:27:27 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:27:27 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:27:27 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:27:27 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:27:27 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:27:27 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:27:27 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:27:27 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:27:27 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:27:27 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:27:27 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:27:27 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:27:27 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:27:27 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:27:27 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:27:27 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:27:27 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:27:27 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:27:27 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:27:27 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:27:27 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:27:27 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:27:27 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 20:27:27 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:27:27 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:27:27 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:27:27 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:27:27 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:27:27 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:27:27 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:27:27 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:27:27 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:27:27 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:27:27 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:27:27 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:27:27 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:27:27 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:27:27 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:27:27 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:27:27 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:27:27 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:27:27 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:27:27 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:27:27 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:27:27 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:27:27 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:27:27 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:27:27 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 20:28:21 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:28:21 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:28:21 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:28:21 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:28:21 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:28:21 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:28:21 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:28:21 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:28:21 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:28:21 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:28:21 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:28:21 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:28:21 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:28:21 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:28:21 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:28:21 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:28:21 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:28:21 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:28:21 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:28:21 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:28:21 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:28:21 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:28:21 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:28:21 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:28:21 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:28:21 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:28:21 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:28:21 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:28:21 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:28:21 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:28:21 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:28:21 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:28:21 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:28:21 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:28:21 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:28:21 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:28:21 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:28:21 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:28:21 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:28:21 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:28:21 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:28:21 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:28:21 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:28:21 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:28:21 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:28:21 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:28:21 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:28:21 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:28:21 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:28:21 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:28:21 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:28:21 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:28:21 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:28:21 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:28:21 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:28:21 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:28:21 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:28:21 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:28:21 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:28:21 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:28:21 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:28:21 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:28:21 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:28:21 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:28:21 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:28:21 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:28:21 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 20:28:21 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:28:21 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:28:21 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:28:21 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:28:21 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:28:21 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:28:22 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 20:30:20 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:30:20 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:30:20 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:30:20 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:30:20 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:30:20 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:30:20 | INFO     | app.services.chat_service | Chat created: 552bf564-7082-41f0-bddc-fe650eefb603 for user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:30:20 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:30:20 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:30:20 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:30:20 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:30:20 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:30:20 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:30:20 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 0 messages
2025-11-20 20:30:20 | INFO     | tovarishbot | send result
2025-11-20 20:30:20 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:30:20 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:30:20 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:30:20 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:30:20 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:30:20 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:30:20 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 0 messages
2025-11-20 20:30:20 | INFO     | tovarishbot | send result
2025-11-20 20:30:20 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 20:47:58 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:47:58 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:47:58 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:47:58 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:47:58 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:47:58 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:47:58 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:47:58 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:47:58 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:47:58 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:47:58 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:47:58 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:47:58 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:47:58 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:47:58 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:47:58 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:47:58 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:47:58 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:47:58 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:47:58 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:47:58 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:47:58 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:47:58 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:47:58 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:47:58 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:47:58 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:47:58 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:47:58 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:47:58 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:47:58 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:47:58 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:47:58 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:47:58 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:47:58 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:47:58 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:47:58 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:47:58 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:47:58 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:47:58 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:47:58 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:47:58 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:47:58 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:47:58 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 20:47:58 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:47:58 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:47:58 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:47:58 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:47:58 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:47:58 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:47:58 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:47:58 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:47:58 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:47:58 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:47:58 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:47:58 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:47:58 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:47:58 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:47:58 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:47:58 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:47:58 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:47:58 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:47:58 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:47:58 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:47:58 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:47:58 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:47:58 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:47:58 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:47:58 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:47:58 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:47:58 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:47:58 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:47:58 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:47:58 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:47:58 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 20:48:54 | INFO     | tovarishbot | üì• –ü–æ–ª—É—á–µ–Ω –∑–∞–ø—Ä–æ—Å –Ω–∞ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—é: recording.webm
2025-11-20 20:48:54 | INFO     | app.services.ai.audio_processor | üéôÔ∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—É–¥–∏–æ—Ñ–∞–π–ª–∞: audio_384eaa48-308f-40eb-a0e3-e13fd9af5624.webm (0.1 MB)
2025-11-20 20:48:54 | INFO     | app.services.ai.audio_processor | Converting audio_384eaa48-308f-40eb-a0e3-e13fd9af5624.webm (0.1 MB) to MP3
2025-11-20 20:48:54 | ERROR    | app.services.ai.audio_processor | Error converting audio to MP3: 
2025-11-20 20:48:54 | INFO     | app.services.ai.audio_processor | üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—é: audio_384eaa48-308f-40eb-a0e3-e13fd9af5624.webm (0.1 MB)
2025-11-20 20:48:54 | INFO     | watchfiles.main | 1 change detected
2025-11-20 20:48:59 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-11-20 20:48:59 | INFO     | app.services.ai.audio_processor | ‚úÖ –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –¥–ª—è audio_384eaa48-308f-40eb-a0e3-e13fd9af5624.webm, —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–æ —Å–∏–º–≤–æ–ª–æ–≤: 31
2025-11-20 20:48:59 | INFO     | tovarishbot | ‚úÖ –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞: 30 —Å–∏–º–≤–æ–ª–æ–≤
2025-11-20 20:48:59 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:48:59 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:48:59 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:48:59 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:48:59 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:48:59 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:48:59 | INFO     | app.services.chat_service | Chat created: 2aab6f6f-397f-40e5-afe1-70ddd343e155 for user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:48:59 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:48:59 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:48:59 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:48:59 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:48:59 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:48:59 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:48:59 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:48:59 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:48:59 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:48:59 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:48:59 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:48:59 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:48:59 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:48:59 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:48:59 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:48:59 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:48:59 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:48:59 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:48:59 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:48:59 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:48:59 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1100, role=user, chat_id=53e8f2e8-b753-489d-af0e-b1945b1282f3)>
2025-11-20 20:48:59 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:48:59 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:48:59 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:48:59 | INFO     | watchfiles.main | 4 changes detected
2025-11-20 20:48:59 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:48:59 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:48:59 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:48:59 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:48:59 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:48:59 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:48:59 | INFO     | app.dependencies | ‚úÖ Token check passed for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:48:59 | INFO     | tovarishbot | üì• Settings generation request from user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:48:59 | INFO     | tovarishbot | {'temperature': 0.7, 'maxLength': 'medium', 'language': 'ru', 'responseStyle': 'friendly'}
2025-11-20 20:48:59 | INFO     | app.services.ai.ai_service | üß† Generating settings for chat 2aab6f6f-397f-40e5-afe1-70ddd343e155 (type: general)
2025-11-20 20:48:59 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 20:49:00 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-11-20 20:49:00 | INFO     | watchfiles.main | 1 change detected
2025-11-20 20:49:00 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/threads/thread_cCZ4eVHH83AZeh409GcZvKS2/messages "HTTP/1.1 200 OK"
2025-11-20 20:49:01 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/threads/thread_cCZ4eVHH83AZeh409GcZvKS2/runs "HTTP/1.1 200 OK"
2025-11-20 20:49:03 | INFO     | httpx | HTTP Request: GET https://api.openai.com/v1/threads/thread_cCZ4eVHH83AZeh409GcZvKS2/runs/run_jMWRTzEqIYqFiNnMjkCxRRrV "HTTP/1.1 200 OK"
2025-11-20 20:49:04 | INFO     | httpx | HTTP Request: GET https://api.openai.com/v1/threads/thread_cCZ4eVHH83AZeh409GcZvKS2/runs/run_jMWRTzEqIYqFiNnMjkCxRRrV "HTTP/1.1 200 OK"
2025-11-20 20:49:04 | INFO     | httpx | HTTP Request: GET https://api.openai.com/v1/threads/thread_cCZ4eVHH83AZeh409GcZvKS2/messages?limit=1&order=desc "HTTP/1.1 200 OK"
2025-11-20 20:49:04 | INFO     | app.services.ai.ai_service | üìù Raw AI response: {
  "temperature": 0.5,
  "maxLength": "short",
  "language": "ru"
}
2025-11-20 20:49:04 | INFO     | app.services.ai.ai_service | ‚úÖ Valid settings: {'temperature': 0.5, 'maxLength': 'short', 'language': 'ru'}
2025-11-20 20:49:05 | INFO     | httpx | HTTP Request: DELETE https://api.openai.com/v1/threads/thread_cCZ4eVHH83AZeh409GcZvKS2 "HTTP/1.1 200 OK"
2025-11-20 20:49:05 | INFO     | tovarishbot | ‚úÖ Generated settings: {'temperature': 0.5, 'maxLength': 'short', 'language': 'ru'}
2025-11-20 20:49:05 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:49:05 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:49:05 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:49:05 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:49:05 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:49:05 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:49:05 | INFO     | app.dependencies | ‚úÖ Token check passed for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:49:05 | INFO     | tovarishbot | chat type: general, message: –†–∞–∑, –¥–≤–∞, –æ–¥–∏–Ω. –£—Ä–∞, —É—Ä–∞, —É—Ä–∞!
2025-11-20 20:49:05 | INFO     | app.services.chat_service | Sending message
2025-11-20 20:49:05 | INFO     | app.services.ai.ai_service | Generating chat title for chat 2aab6f6f-397f-40e5-afe1-70ddd343e155 (tool: general)
2025-11-20 20:49:05 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 20:49:06 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-20 20:49:06 | INFO     | app.services.ai.ai_service | ‚úÖ Chat title generated: '–í–µ—Å–µ–ª—ã–µ —Å—á–∏—Ç–∞–ª–∫–∏'
2025-11-20 20:49:06 | INFO     | app.services.chat_service | AI-generated title: '–í–µ—Å–µ–ª—ã–µ —Å—á–∏—Ç–∞–ª–∫–∏'
2025-11-20 20:49:06 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:49:06 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:49:06 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:49:06 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:49:06 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:49:06 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:49:06 | INFO     | app.dependencies | ‚úÖ Token check passed for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:49:06 | INFO     | app.services.chat_service | Chat 2aab6f6f-397f-40e5-afe1-70ddd343e155 has 1 messages
2025-11-20 20:49:06 | INFO     | app.services.chat_service | Retrieved 1 messages for AI context, chat_id=2aab6f6f-397f-40e5-afe1-70ddd343e155
2025-11-20 20:49:06 | INFO     | tovarishbot | Chat history length: 1
2025-11-20 20:49:06 | INFO     | tovarishbot | Generating response for user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:49:06 | INFO     | app.services.ai.ai_service | Getting streaming response for message: '–†–∞–∑, –¥–≤–∞, –æ–¥–∏–Ω. –£—Ä–∞, —É—Ä–∞, —É—Ä–∞!...'
2025-11-20 20:49:06 | INFO     | app.services.ai.response_handler | Starting streaming request: message='–†–∞–∑, –¥–≤–∞, –æ–¥–∏–Ω. –£—Ä–∞, —É—Ä–∞, —É—Ä–∞!...', history_length=1, has_files=False
2025-11-20 20:49:06 | INFO     | app.services.ai.response_handler | AI prompt: 'undefined

üìè –î–õ–ò–ù–ê –û–¢–í–ï–¢–ê: –î–∞–≤–∞–π –∫—Ä–∞—Ç–∫–∏–µ –∏ –ª–∞–∫–æ–Ω–∏—á–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã (1-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è).

üåç –Ø–ó–´–ö: –û—Ç–≤–µ—á–∞–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.

‚öñÔ∏è –°–¢–ò–õ–¨: –ë–∞–ª–∞–Ω—Å–∏—Ä—É–π –º–µ–∂–¥—É —Ç–æ—á–Ω–æ—Å—Ç—å—é –∏ –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å—é.

üòä –ò—Å–ø–æ–ª—å–∑—É–π –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π –∏ —Ç–µ–ø–ª—ã–π —Ç–æ–Ω –æ–±—â–µ–Ω–∏—è.'
2025-11-20 20:49:06 | INFO     | app.services.ai.response_handler | Adding 1 messages from chat history
2025-11-20 20:49:06 | INFO     | app.services.ai.response_handler | Added 1 history messages to context
2025-11-20 20:49:06 | INFO     | app.services.ai.response_handler | Sending streaming request to gpt-4o with 3 messages
2025-11-20 20:49:06 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 20:49:06 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-20 20:49:06 | INFO     | app.services.ai.response_handler | Stream created successfully, starting to yield chunks...
2025-11-20 20:49:07 | INFO     | app.services.ai.response_handler | GPT streaming completed successfully. Total chunks: 21
2025-11-20 20:49:07 | INFO     | app.services.chat_service | Sending message
2025-11-20 20:49:07 | INFO     | app.services.user_service | Tokens used: 2 by user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:49:07 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 20:49:49 | INFO     | tovarishbot | üì• –ü–æ–ª—É—á–µ–Ω –∑–∞–ø—Ä–æ—Å –Ω–∞ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—é: recording.webm
2025-11-20 20:49:49 | INFO     | app.services.ai.audio_processor | üéôÔ∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—É–¥–∏–æ—Ñ–∞–π–ª–∞: audio_4323e268-ffcf-4088-ac88-ba8c8dc57f57.webm (0.1 MB)
2025-11-20 20:49:49 | INFO     | app.services.ai.audio_processor | Converting audio_4323e268-ffcf-4088-ac88-ba8c8dc57f57.webm (0.1 MB) to MP3
2025-11-20 20:49:49 | ERROR    | app.services.ai.audio_processor | Error converting audio to MP3: 
2025-11-20 20:49:49 | INFO     | app.services.ai.audio_processor | üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—é: audio_4323e268-ffcf-4088-ac88-ba8c8dc57f57.webm (0.1 MB)
2025-11-20 20:49:50 | INFO     | watchfiles.main | 1 change detected
2025-11-20 20:49:51 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-11-20 20:49:51 | INFO     | app.services.ai.audio_processor | ‚úÖ –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –¥–ª—è audio_4323e268-ffcf-4088-ac88-ba8c8dc57f57.webm, —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–æ —Å–∏–º–≤–æ–ª–æ–≤: 71
2025-11-20 20:49:51 | INFO     | tovarishbot | ‚úÖ –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞: 70 —Å–∏–º–≤–æ–ª–æ–≤
2025-11-20 20:49:51 | INFO     | watchfiles.main | 1 change detected
2025-11-20 20:49:54 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:49:54 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:49:54 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:49:54 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:49:54 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:49:54 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:49:54 | INFO     | app.dependencies | ‚úÖ Token check passed for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:49:54 | INFO     | tovarishbot | üì• Settings generation request from user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:49:54 | INFO     | tovarishbot | {'temperature': 0.7, 'maxLength': 'medium', 'language': 'ru', 'responseStyle': 'friendly'}
2025-11-20 20:49:54 | INFO     | app.services.ai.ai_service | üß† Generating settings for chat 2aab6f6f-397f-40e5-afe1-70ddd343e155 (type: general)
2025-11-20 20:49:54 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 20:49:54 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-11-20 20:49:54 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/threads/thread_zficyYlH3iiOVEfJ6rGvqf9e/messages "HTTP/1.1 200 OK"
2025-11-20 20:49:56 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/threads/thread_zficyYlH3iiOVEfJ6rGvqf9e/runs "HTTP/1.1 200 OK"
2025-11-20 20:49:57 | INFO     | httpx | HTTP Request: GET https://api.openai.com/v1/threads/thread_zficyYlH3iiOVEfJ6rGvqf9e/runs/run_Fo77U0vHiL74NvLXvZwS2Odr "HTTP/1.1 200 OK"
2025-11-20 20:49:59 | INFO     | httpx | HTTP Request: GET https://api.openai.com/v1/threads/thread_zficyYlH3iiOVEfJ6rGvqf9e/runs/run_Fo77U0vHiL74NvLXvZwS2Odr "HTTP/1.1 200 OK"
2025-11-20 20:49:59 | INFO     | httpx | HTTP Request: GET https://api.openai.com/v1/threads/thread_zficyYlH3iiOVEfJ6rGvqf9e/messages?limit=1&order=desc "HTTP/1.1 200 OK"
2025-11-20 20:49:59 | INFO     | app.services.ai.ai_service | üìù Raw AI response: {
  "temperature": 0.6,
  "maxLength": "medium",
  "language": "ru"
}
2025-11-20 20:49:59 | INFO     | app.services.ai.ai_service | ‚úÖ Valid settings: {'temperature': 0.6, 'maxLength': 'medium', 'language': 'ru'}
2025-11-20 20:49:59 | INFO     | httpx | HTTP Request: DELETE https://api.openai.com/v1/threads/thread_zficyYlH3iiOVEfJ6rGvqf9e "HTTP/1.1 200 OK"
2025-11-20 20:49:59 | INFO     | tovarishbot | ‚úÖ Generated settings: {'temperature': 0.6, 'maxLength': 'medium', 'language': 'ru'}
2025-11-20 20:49:59 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:49:59 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:49:59 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:49:59 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:49:59 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:49:59 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:49:59 | INFO     | app.dependencies | ‚úÖ Token check passed for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:49:59 | INFO     | tovarishbot | chat type: general, message: –†–∞—Å—Å–∫–∞–∂–∏ –º–Ω–µ, –∫–∞–∫—É—é –∏–≥—Ä—É –ª—É—á—à–µ —Å–∫–∞—á–∞—Ç—å, BMG Drive –∏–ª–∏ Forza Horizon 5?
2025-11-20 20:49:59 | INFO     | app.services.chat_service | Sending message
2025-11-20 20:49:59 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:49:59 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:49:59 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:49:59 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:49:59 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:49:59 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:49:59 | INFO     | app.dependencies | ‚úÖ Token check passed for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:49:59 | INFO     | app.services.chat_service | Chat 2aab6f6f-397f-40e5-afe1-70ddd343e155 has 3 messages
2025-11-20 20:49:59 | INFO     | app.services.chat_service | Retrieved 3 messages for AI context, chat_id=2aab6f6f-397f-40e5-afe1-70ddd343e155
2025-11-20 20:49:59 | INFO     | tovarishbot | Chat history length: 3
2025-11-20 20:49:59 | INFO     | tovarishbot | Generating response for user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:49:59 | INFO     | app.services.ai.ai_service | Getting streaming response for message: '–†–∞—Å—Å–∫–∞–∂–∏ –º–Ω–µ, –∫–∞–∫—É—é –∏–≥—Ä—É –ª—É—á—à–µ —Å–∫–∞—á–∞—Ç—å, BMG Drive ...'
2025-11-20 20:49:59 | INFO     | app.services.ai.response_handler | Starting streaming request: message='–†–∞—Å—Å–∫–∞–∂–∏ –º–Ω–µ, –∫–∞–∫—É—é –∏–≥—Ä—É –ª—É—á—à–µ —Å–∫–∞—á–∞—Ç—å, BMG Drive ...', history_length=3, has_files=False
2025-11-20 20:49:59 | INFO     | app.services.ai.response_handler | AI prompt: 'undefined

üìè –î–õ–ò–ù–ê –û–¢–í–ï–¢–ê: –î–∞–≤–∞–π –æ—Ç–≤–µ—Ç—ã —Å—Ä–µ–¥–Ω–µ–π –¥–ª–∏–Ω—ã —Å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –¥–µ—Ç–∞–ª—è–º–∏.

üåç –Ø–ó–´–ö: –û—Ç–≤–µ—á–∞–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.

‚öñÔ∏è –°–¢–ò–õ–¨: –ë–∞–ª–∞–Ω—Å–∏—Ä—É–π –º–µ–∂–¥—É —Ç–æ—á–Ω–æ—Å—Ç—å—é –∏ –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å—é.

üòä –ò—Å–ø–æ–ª—å–∑—É–π –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π –∏ —Ç–µ–ø–ª—ã–π —Ç–æ–Ω –æ–±—â–µ–Ω–∏—è.'
2025-11-20 20:49:59 | INFO     | app.services.ai.response_handler | Adding 3 messages from chat history
2025-11-20 20:49:59 | INFO     | app.services.ai.response_handler | Added 3 history messages to context
2025-11-20 20:49:59 | INFO     | app.services.ai.response_handler | Sending streaming request to gpt-4o with 5 messages
2025-11-20 20:50:00 | INFO     | watchfiles.main | 4 changes detected
2025-11-20 20:50:00 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-20 20:50:00 | INFO     | app.services.ai.response_handler | Stream created successfully, starting to yield chunks...
2025-11-20 20:50:10 | INFO     | app.services.ai.response_handler | GPT streaming completed successfully. Total chunks: 240
2025-11-20 20:50:10 | INFO     | app.services.chat_service | Sending message
2025-11-20 20:50:10 | INFO     | app.services.user_service | Tokens used: 2 by user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:50:10 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 20:50:49 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:50:49 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:50:49 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:50:49 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:50:49 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:50:49 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:50:49 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1110, role=user, chat_id=2aab6f6f-397f-40e5-afe1-70ddd343e155)>
2025-11-20 20:50:49 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:50:49 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:50:49 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:50:49 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:50:49 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:50:49 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:50:49 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:50:49 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:50:49 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:50:49 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:50:49 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:50:49 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1110, role=user, chat_id=2aab6f6f-397f-40e5-afe1-70ddd343e155)>
2025-11-20 20:50:49 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:50:49 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:50:49 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:50:49 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:50:49 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:50:49 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:50:49 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:50:49 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:50:49 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:50:49 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:50:49 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:50:49 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1110, role=user, chat_id=2aab6f6f-397f-40e5-afe1-70ddd343e155)>
2025-11-20 20:50:49 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:50:49 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:50:49 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:50:49 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:50:49 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:50:49 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:50:49 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:50:49 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:50:49 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:50:49 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:50:49 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:50:49 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1110, role=user, chat_id=2aab6f6f-397f-40e5-afe1-70ddd343e155)>
2025-11-20 20:50:49 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:50:49 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:50:49 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:50:49 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:50:49 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:50:49 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:50:49 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:50:49 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:50:49 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:50:49 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:50:49 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:50:49 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1110, role=user, chat_id=2aab6f6f-397f-40e5-afe1-70ddd343e155)>
2025-11-20 20:50:49 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:50:49 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:50:49 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:50:49 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:50:49 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:50:49 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 20:50:49 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:50:49 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:50:49 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:50:49 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:50:49 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:50:49 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:50:49 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1110, role=user, chat_id=2aab6f6f-397f-40e5-afe1-70ddd343e155)>
2025-11-20 20:50:49 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:50:49 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:50:49 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:50:49 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:50:49 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:50:49 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 20:53:26 | INFO     | tovarishbot | üì• –ü–æ–ª—É—á–µ–Ω –∑–∞–ø—Ä–æ—Å –Ω–∞ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—é: recording.webm
2025-11-20 20:53:26 | INFO     | app.services.ai.audio_processor | üéôÔ∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—É–¥–∏–æ—Ñ–∞–π–ª–∞: audio_41b56b47-4ff0-42d5-8fda-ce62fd79dd25.webm (0.1 MB)
2025-11-20 20:53:26 | INFO     | app.services.ai.audio_processor | Converting audio_41b56b47-4ff0-42d5-8fda-ce62fd79dd25.webm (0.1 MB) to MP3
2025-11-20 20:53:26 | ERROR    | app.services.ai.audio_processor | Error converting audio to MP3: 
2025-11-20 20:53:26 | INFO     | app.services.ai.audio_processor | üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—é: audio_41b56b47-4ff0-42d5-8fda-ce62fd79dd25.webm (0.1 MB)
2025-11-20 20:53:27 | INFO     | watchfiles.main | 1 change detected
2025-11-20 20:53:28 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-11-20 20:53:28 | INFO     | app.services.ai.audio_processor | ‚úÖ –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –¥–ª—è audio_41b56b47-4ff0-42d5-8fda-ce62fd79dd25.webm, —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–æ —Å–∏–º–≤–æ–ª–æ–≤: 90
2025-11-20 20:53:28 | INFO     | tovarishbot | ‚úÖ –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞: 89 —Å–∏–º–≤–æ–ª–æ–≤
2025-11-20 20:53:28 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:53:28 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:53:28 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:53:28 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:53:28 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:53:28 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:53:28 | INFO     | app.services.chat_service | Chat created: ac07f301-ab5f-4361-a160-1ab564c4d4a9 for user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:53:28 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:53:28 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:53:28 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:53:28 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:53:28 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:53:28 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:53:28 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1110, role=user, chat_id=2aab6f6f-397f-40e5-afe1-70ddd343e155)>
2025-11-20 20:53:28 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:53:28 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:53:28 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:53:28 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:53:28 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:53:28 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:53:28 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:53:28 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:53:28 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:53:28 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:53:28 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:53:28 | INFO     | watchfiles.main | 4 changes detected
2025-11-20 20:53:28 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1110, role=user, chat_id=2aab6f6f-397f-40e5-afe1-70ddd343e155)>
2025-11-20 20:53:28 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 20:53:28 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1104, role=user, chat_id=b1df3007-5010-4482-819e-fca397a1697a)>
2025-11-20 20:53:28 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 20:53:28 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 20:53:28 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 20:53:28 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:53:28 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:53:28 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:53:28 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:53:28 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:53:28 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:53:28 | INFO     | app.dependencies | ‚úÖ Token check passed for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:53:28 | INFO     | tovarishbot | üì• Settings generation request from user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:53:28 | INFO     | tovarishbot | {'temperature': 0.7, 'maxLength': 'medium', 'language': 'ru', 'responseStyle': 'friendly'}
2025-11-20 20:53:28 | INFO     | app.services.ai.ai_service | üß† Generating settings for chat ac07f301-ab5f-4361-a160-1ab564c4d4a9 (type: general)
2025-11-20 20:53:28 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 20:53:29 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-11-20 20:53:29 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/threads/thread_GOnJpz6z1JEA6v6YLsQsvfFd/messages "HTTP/1.1 200 OK"
2025-11-20 20:53:30 | INFO     | watchfiles.main | 1 change detected
2025-11-20 20:53:30 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/threads/thread_GOnJpz6z1JEA6v6YLsQsvfFd/runs "HTTP/1.1 200 OK"
2025-11-20 20:53:32 | INFO     | httpx | HTTP Request: GET https://api.openai.com/v1/threads/thread_GOnJpz6z1JEA6v6YLsQsvfFd/runs/run_qqBnKW2zmHw7nqjH5aDvi4l9 "HTTP/1.1 200 OK"
2025-11-20 20:53:33 | INFO     | httpx | HTTP Request: GET https://api.openai.com/v1/threads/thread_GOnJpz6z1JEA6v6YLsQsvfFd/runs/run_qqBnKW2zmHw7nqjH5aDvi4l9 "HTTP/1.1 200 OK"
2025-11-20 20:53:35 | INFO     | httpx | HTTP Request: GET https://api.openai.com/v1/threads/thread_GOnJpz6z1JEA6v6YLsQsvfFd/runs/run_qqBnKW2zmHw7nqjH5aDvi4l9 "HTTP/1.1 200 OK"
2025-11-20 20:53:35 | INFO     | httpx | HTTP Request: GET https://api.openai.com/v1/threads/thread_GOnJpz6z1JEA6v6YLsQsvfFd/messages?limit=1&order=desc "HTTP/1.1 200 OK"
2025-11-20 20:53:35 | INFO     | app.services.ai.ai_service | üìù Raw AI response: {
  "temperature": 0.8,
  "maxLength": "detailed",
  "language": "ru"
}
2025-11-20 20:53:35 | INFO     | app.services.ai.ai_service | ‚úÖ Valid settings: {'temperature': 0.8, 'maxLength': 'detailed', 'language': 'ru'}
2025-11-20 20:53:35 | INFO     | httpx | HTTP Request: DELETE https://api.openai.com/v1/threads/thread_GOnJpz6z1JEA6v6YLsQsvfFd "HTTP/1.1 200 OK"
2025-11-20 20:53:35 | INFO     | tovarishbot | ‚úÖ Generated settings: {'temperature': 0.8, 'maxLength': 'detailed', 'language': 'ru'}
2025-11-20 20:53:35 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:53:35 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:53:35 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:53:35 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:53:35 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:53:35 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:53:35 | INFO     | app.dependencies | ‚úÖ Token check passed for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:53:35 | INFO     | tovarishbot | chat type: general, message: –†–∞–∑, —Ä–∞–∑. –ê–ª–ª–æ, –∞–ª–ª–æ. –û–π, –∏–º–±–∞, —Å–º–æ—Ç—Ä–∏, –≤–æ–æ–±—â–µ, —Ä–∞—Å—Å–∫–∞–∂–∏ –º–Ω–µ –ø—Ä–æ Brawl Stars, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞.
2025-11-20 20:53:35 | INFO     | app.services.chat_service | Sending message
2025-11-20 20:53:35 | INFO     | app.services.ai.ai_service | Generating chat title for chat ac07f301-ab5f-4361-a160-1ab564c4d4a9 (tool: general)
2025-11-20 20:53:36 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 20:53:36 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-20 20:53:36 | INFO     | app.services.ai.ai_service | ‚úÖ Chat title generated: '–ó–≤—É–∫ Brawl Stars'
2025-11-20 20:53:36 | INFO     | app.services.chat_service | AI-generated title: '–ó–≤—É–∫ Brawl Stars'
2025-11-20 20:53:36 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 20:53:36 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 20:53:36 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 20:53:36 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:53:36 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 20:53:36 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:53:36 | INFO     | app.dependencies | ‚úÖ Token check passed for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:53:36 | INFO     | app.services.chat_service | Chat ac07f301-ab5f-4361-a160-1ab564c4d4a9 has 1 messages
2025-11-20 20:53:36 | INFO     | app.services.chat_service | Retrieved 1 messages for AI context, chat_id=ac07f301-ab5f-4361-a160-1ab564c4d4a9
2025-11-20 20:53:36 | INFO     | tovarishbot | Chat history length: 1
2025-11-20 20:53:36 | INFO     | tovarishbot | Generating response for user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:53:36 | INFO     | app.services.ai.ai_service | Getting streaming response for message: '–†–∞–∑, —Ä–∞–∑. –ê–ª–ª–æ, –∞–ª–ª–æ. –û–π, –∏–º–±–∞, —Å–º–æ—Ç—Ä–∏, –≤–æ–æ–±—â–µ, —Ä–∞...'
2025-11-20 20:53:36 | INFO     | app.services.ai.response_handler | Starting streaming request: message='–†–∞–∑, —Ä–∞–∑. –ê–ª–ª–æ, –∞–ª–ª–æ. –û–π, –∏–º–±–∞, —Å–º–æ—Ç—Ä–∏, –≤–æ–æ–±—â–µ, —Ä–∞...', history_length=1, has_files=False
2025-11-20 20:53:36 | INFO     | app.services.ai.response_handler | AI prompt: 'undefined

üìè –î–õ–ò–ù–ê –û–¢–í–ï–¢–ê: –î–∞–≤–∞–π –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–µ –æ—Ç–≤–µ—Ç—ã —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏ –ø–æ—è—Å–Ω–µ–Ω–∏—è–º–∏.

üåç –Ø–ó–´–ö: –û—Ç–≤–µ—á–∞–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.

‚öñÔ∏è –°–¢–ò–õ–¨: –ë–∞–ª–∞–Ω—Å–∏—Ä—É–π –º–µ–∂–¥—É —Ç–æ—á–Ω–æ—Å—Ç—å—é –∏ –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å—é.

üòä –ò—Å–ø–æ–ª—å–∑—É–π –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π –∏ —Ç–µ–ø–ª—ã–π —Ç–æ–Ω –æ–±—â–µ–Ω–∏—è.'
2025-11-20 20:53:36 | INFO     | app.services.ai.response_handler | Adding 1 messages from chat history
2025-11-20 20:53:36 | INFO     | app.services.ai.response_handler | Added 1 history messages to context
2025-11-20 20:53:36 | INFO     | app.services.ai.response_handler | Sending streaming request to gpt-4o with 3 messages
2025-11-20 20:53:36 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 20:53:37 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-20 20:53:37 | INFO     | app.services.ai.response_handler | Stream created successfully, starting to yield chunks...
2025-11-20 20:53:54 | INFO     | app.services.ai.response_handler | GPT streaming completed successfully. Total chunks: 487
2025-11-20 20:53:54 | INFO     | app.services.chat_service | Sending message
2025-11-20 20:53:54 | INFO     | app.services.user_service | Tokens used: 2 by user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 20:53:54 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 22:42:51 | INFO     | tovarishbot | üöÄ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ. –§–∞–π–ª: logs\tovarishbot_20251120.log
2025-11-20 22:42:52 | INFO     | tovarishbot | üöÄ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ. –§–∞–π–ª: logs\tovarishbot_20251120.log
2025-11-20 22:42:52 | INFO     | app.startup | üöÄ Starting –¢–æ–≤–∞—Ä–∏—â–ë–æ—Ç API...
2025-11-20 22:42:52 | INFO     | app.services.telegram_validator | Telegram validator initialized
2025-11-20 22:42:52 | INFO     | app.services.telegram_validator | Telegram validator initialized globally
2025-11-20 22:42:52 | INFO     | app.startup | ‚úÖ Telegram validator initialized successfully
2025-11-20 22:42:52 | INFO     | app.startup | üìÅ Upload directory ready: uploads
2025-11-20 22:42:52 | INFO     | app.database | Database tables created successfully
2025-11-20 22:42:52 | INFO     | app.startup | ‚úÖ Database initialized successfully
2025-11-20 22:42:53 | INFO     | app.services.ai.ai_service | AIService initialized with model: gpt-4o
2025-11-20 22:42:53 | INFO     | app.services.ai.audio_processor | FFmpeg is available
2025-11-20 22:42:53 | INFO     | app.services.ai.ai_service | All processors initialized successfully
2025-11-20 22:42:53 | INFO     | app.services.ai.ai_service | AIService instance created successfully
2025-11-20 22:42:53 | INFO     | app.services.ai.ai_service | Performing health check...
2025-11-20 22:42:54 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-20 22:42:54 | INFO     | app.services.ai.ai_service | Health check passed
2025-11-20 22:42:54 | INFO     | app.startup | ‚úÖ AI service is healthy
2025-11-20 22:42:54 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 22:42:54 | INFO     | app.startup | ‚úÖ ImageService initialized
2025-11-20 22:42:54 | INFO     | apscheduler.scheduler | Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-11-20 22:42:54 | INFO     | apscheduler.scheduler | Added job "Clean up old generated images" to job store "default"
2025-11-20 22:42:54 | INFO     | apscheduler.scheduler | Scheduler started
2025-11-20 22:42:54 | INFO     | app.tasks.image_cleanup_task | ‚úÖ Image cleanup scheduler started
   Schedule: Daily at 03:00
   Cleanup threshold: >30 days
2025-11-20 22:42:54 | INFO     | app.startup | ‚úÖ Image cleanup scheduler started
2025-11-20 22:42:54 | INFO     | app.startup | üéØ Environment: development
2025-11-20 22:42:54 | INFO     | app.startup | ‚úÖ Application startup completed successfully
2025-11-20 22:42:54 | INFO     | app.startup | üîê Security features enabled:
2025-11-20 22:42:54 | INFO     | app.startup |    - Telegram HMAC-SHA256 validation
2025-11-20 22:42:54 | INFO     | app.startup |    - JWT token authentication
2025-11-20 22:42:54 | INFO     | app.startup |    - CORS protection
2025-11-20 22:42:54 | INFO     | app.startup |    - Request rate limiting
2025-11-20 22:42:58 | INFO     | watchfiles.main | 1 change detected
2025-11-20 22:43:12 | INFO     | watchfiles.main | 1 change detected
2025-11-20 22:43:14 | INFO     | watchfiles.main | 1 change detected
2025-11-20 22:44:00 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 22:44:00 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 22:44:00 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 22:44:00 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:44:00 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 22:44:00 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:44:00 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1112, role=user, chat_id=ac07f301-ab5f-4361-a160-1ab564c4d4a9)>
2025-11-20 22:44:00 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1110, role=user, chat_id=2aab6f6f-397f-40e5-afe1-70ddd343e155)>
2025-11-20 22:44:00 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 22:44:00 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 22:44:00 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 22:44:00 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 22:44:00 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 22:44:00 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 22:44:00 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 22:44:00 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:44:00 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 22:44:00 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:44:00 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1112, role=user, chat_id=ac07f301-ab5f-4361-a160-1ab564c4d4a9)>
2025-11-20 22:44:00 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1110, role=user, chat_id=2aab6f6f-397f-40e5-afe1-70ddd343e155)>
2025-11-20 22:44:00 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 22:44:00 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 22:44:00 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 22:44:00 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 22:44:00 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 22:44:00 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 22:44:00 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 22:44:00 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:44:00 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 22:44:00 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:44:00 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1112, role=user, chat_id=ac07f301-ab5f-4361-a160-1ab564c4d4a9)>
2025-11-20 22:44:00 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1110, role=user, chat_id=2aab6f6f-397f-40e5-afe1-70ddd343e155)>
2025-11-20 22:44:00 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 22:44:00 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 22:44:00 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 22:44:00 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 22:44:00 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 22:44:00 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 22:44:00 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 22:44:00 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:44:00 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 22:44:00 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:44:00 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1112, role=user, chat_id=ac07f301-ab5f-4361-a160-1ab564c4d4a9)>
2025-11-20 22:44:00 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1110, role=user, chat_id=2aab6f6f-397f-40e5-afe1-70ddd343e155)>
2025-11-20 22:44:00 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 22:44:00 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 22:44:00 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 22:44:00 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 22:44:00 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 22:44:00 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 22:44:00 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 22:44:00 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:44:00 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 22:44:00 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:44:00 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1112, role=user, chat_id=ac07f301-ab5f-4361-a160-1ab564c4d4a9)>
2025-11-20 22:44:00 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1110, role=user, chat_id=2aab6f6f-397f-40e5-afe1-70ddd343e155)>
2025-11-20 22:44:00 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 22:44:00 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 22:44:00 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 22:44:00 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 22:44:00 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 22:44:00 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 22:44:00 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 22:44:00 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:44:00 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 22:44:00 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:44:00 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1112, role=user, chat_id=ac07f301-ab5f-4361-a160-1ab564c4d4a9)>
2025-11-20 22:44:00 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1110, role=user, chat_id=2aab6f6f-397f-40e5-afe1-70ddd343e155)>
2025-11-20 22:44:00 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 22:44:00 | INFO     | app.services.chat_service | Search last message: <Message(message_id=1106, role=user, chat_id=9f40ef40-785f-4221-ad54-1c1a1321ecd9)>
2025-11-20 22:44:00 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 3 chats
2025-11-20 22:44:00 | INFO     | tovarishbot | Requested chat history for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2, limit: 3, offset: 0
2025-11-20 22:44:00 | INFO     | tovarishbot | Returned 3 chats
2025-11-20 22:44:05 | INFO     | watchfiles.main | 1 change detected
2025-11-20 22:44:06 | INFO     | watchfiles.main | 1 change detected
2025-11-20 22:44:11 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 22:44:11 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 22:44:11 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 22:44:11 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:44:11 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 22:44:11 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:44:11 | INFO     | app.services.chat_service | Chat created: 688ae131-2886-4fe2-98ca-1630bd6dad3c for user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:44:11 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 22:44:11 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 22:44:11 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 22:44:11 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:44:11 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 22:44:11 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:44:11 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 0 messages
2025-11-20 22:44:11 | INFO     | tovarishbot | send result
2025-11-20 22:44:11 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 22:44:11 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 22:44:11 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 22:44:11 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:44:11 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 22:44:11 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:44:11 | INFO     | app.services.chat_service | User d25df538-9a10-4ce7-9613-5bd4c65c49e2 has 0 messages
2025-11-20 22:44:11 | INFO     | tovarishbot | send result
2025-11-20 22:44:11 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 22:44:14 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 22:44:14 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 22:44:14 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 22:44:14 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:44:14 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 22:44:14 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:44:14 | INFO     | app.dependencies | ‚úÖ Token check passed for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:44:14 | INFO     | tovarishbot | üì• Settings generation request from user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:44:14 | INFO     | tovarishbot | {'temperature': 0.7, 'maxLength': 'detailed', 'language': 'ru', 'withComments': True, 'codeStyle': 'clean', 'explainSteps': True, 'defaultLanguage': 'python'}
2025-11-20 22:44:14 | INFO     | app.services.ai.ai_service | üß† Generating settings for chat 688ae131-2886-4fe2-98ca-1630bd6dad3c (type: coding)
2025-11-20 22:44:14 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 22:44:15 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-11-20 22:44:16 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/threads/thread_8Pf3CyXCfBSZFHXXdShZcFRT/messages "HTTP/1.1 200 OK"
2025-11-20 22:44:17 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/threads/thread_8Pf3CyXCfBSZFHXXdShZcFRT/runs "HTTP/1.1 200 OK"
2025-11-20 22:44:19 | INFO     | httpx | HTTP Request: GET https://api.openai.com/v1/threads/thread_8Pf3CyXCfBSZFHXXdShZcFRT/runs/run_CMXupRrNNRH2rhnWZs6m7dWo "HTTP/1.1 200 OK"
2025-11-20 22:44:20 | INFO     | watchfiles.main | 1 change detected
2025-11-20 22:44:20 | INFO     | httpx | HTTP Request: GET https://api.openai.com/v1/threads/thread_8Pf3CyXCfBSZFHXXdShZcFRT/runs/run_CMXupRrNNRH2rhnWZs6m7dWo "HTTP/1.1 200 OK"
2025-11-20 22:44:20 | INFO     | httpx | HTTP Request: GET https://api.openai.com/v1/threads/thread_8Pf3CyXCfBSZFHXXdShZcFRT/messages?limit=1&order=desc "HTTP/1.1 200 OK"
2025-11-20 22:44:20 | INFO     | app.services.ai.ai_service | üìù Raw AI response: {
  "temperature": 0.5,
  "maxLength": "medium",
  "language": "ru"
}
2025-11-20 22:44:20 | INFO     | app.services.ai.ai_service | ‚úÖ Valid settings: {'temperature': 0.5, 'maxLength': 'medium', 'language': 'ru'}
2025-11-20 22:44:21 | INFO     | httpx | HTTP Request: DELETE https://api.openai.com/v1/threads/thread_8Pf3CyXCfBSZFHXXdShZcFRT "HTTP/1.1 200 OK"
2025-11-20 22:44:21 | INFO     | tovarishbot | ‚úÖ Generated settings: {'temperature': 0.5, 'maxLength': 'medium', 'language': 'ru'}
2025-11-20 22:44:21 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 22:44:21 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 22:44:21 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 22:44:21 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:44:21 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 22:44:21 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:44:21 | INFO     | app.dependencies | ‚úÖ Token check passed for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:44:21 | INFO     | tovarishbot | chat type: coding, message: –ø—Ä–∏–≤–µ—Ç
2025-11-20 22:44:21 | INFO     | app.services.chat_service | Sending message
2025-11-20 22:44:21 | INFO     | app.services.ai.ai_service | Generating chat title for chat 688ae131-2886-4fe2-98ca-1630bd6dad3c (tool: coding)
2025-11-20 22:44:21 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 22:44:22 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-20 22:44:22 | INFO     | app.services.ai.ai_service | ‚úÖ Chat title generated: '–ü—Ä–∏–≤–µ—Ç, –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç!'
2025-11-20 22:44:22 | INFO     | app.services.chat_service | AI-generated title: '–ü—Ä–∏–≤–µ—Ç, –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç!'
2025-11-20 22:44:22 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 22:44:22 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 22:44:22 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 22:44:22 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:44:22 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 22:44:22 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:44:22 | INFO     | app.dependencies | ‚úÖ Token check passed for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:44:22 | INFO     | app.services.chat_service | Chat 688ae131-2886-4fe2-98ca-1630bd6dad3c has 1 messages
2025-11-20 22:44:22 | INFO     | app.services.chat_service | Retrieved 1 messages for AI context, chat_id=688ae131-2886-4fe2-98ca-1630bd6dad3c
2025-11-20 22:44:22 | INFO     | tovarishbot | Chat history length: 1
2025-11-20 22:44:22 | INFO     | tovarishbot | Generating response for user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:44:22 | INFO     | app.services.ai.ai_service | Getting streaming response for message: '–ø—Ä–∏–≤–µ—Ç...'
2025-11-20 22:44:22 | INFO     | app.services.ai.response_handler | Starting streaming request: message='–ø—Ä–∏–≤–µ—Ç...', history_length=1, has_files=False
2025-11-20 22:44:22 | INFO     | app.services.ai.response_handler | AI prompt: '–¢—ã - —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—Å–∫–∏–π –º–µ–Ω—Ç–æ—Ä. –¢–í–û–Ø –ï–î–ò–ù–°–¢–í–ï–ù–ù–ê–Ø –ó–ê–î–ê–ß–ê: –ø–æ–º–æ–≥–∞—Ç—å —Å –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º. –ó–∞–¥–∞–≤–∞–π —É—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã: —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, —Ü–µ–ª—å –∫–æ–¥–∞, —É—Ä–æ–≤–µ–Ω—å –æ–ø—ã—Ç–∞. –í—Å–µ–≥–¥–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–π —Ä–∞–±–æ—á–∏–π –∫–æ–¥ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ –∏ –ø–æ—à–∞–≥–æ–≤—ã–º –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º. –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –Ω–µ –ø—Ä–æ –∫–æ–¥–∏–Ω–≥ - –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤—å –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É —á–∞—Ç—É.

üìè –î–õ–ò–ù–ê –û–¢–í–ï–¢–ê: –î–∞–≤–∞–π –æ—Ç–≤–µ—Ç—ã —Å—Ä–µ–¥–Ω–µ–π –¥–ª–∏–Ω—ã —Å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –¥–µ—Ç–∞–ª—è–º–∏.

üåç –Ø–ó–´–ö: –û—Ç–≤–µ—á–∞–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.

‚öñÔ∏è –°–¢–ò–õ–¨: –ë–∞–ª–∞–Ω—Å–∏—Ä—É–π –º–µ–∂–¥—É —Ç–æ—á–Ω–æ—Å—Ç—å—é –∏ –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å—é.

üí¨ –í–ê–ñ–ù–û: –î–æ–±–∞–≤–ª—è–π –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∫–æ–¥—É –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ, –æ–±—ä—è—Å–Ω—è—è —á—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–∞–∂–¥–∞—è —á–∞—Å—Ç—å.
üßπ –ò—Å–ø–æ–ª—å–∑—É–π –ø—Ä–∏–Ω—Ü–∏–ø—ã Clean Code: –ø–æ–Ω—è—Ç–Ω—ã–µ –∏–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –∫–æ—Ä–æ—Ç–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏, –º–∏–Ω–∏–º—É–º –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è.
üíª –ò—Å–ø–æ–ª—å–∑—É–π Python –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —è–∑—ã–∫–∞ –¥–ª—è –ø—Ä–∏–º–µ—Ä–æ–≤.
üìö –û–±—ä—è—Å–Ω—è–π —Ä–µ—à–µ–Ω–∏–µ –ø–æ—à–∞–≥–æ–≤–æ: —á—Ç–æ –¥–µ–ª–∞–µ–º, –ø–æ—á–µ–º—É —Ç–∞–∫, –∫–∞–∫–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.'
2025-11-20 22:44:22 | INFO     | app.services.ai.response_handler | Adding 1 messages from chat history
2025-11-20 22:44:22 | INFO     | app.services.ai.response_handler | Added 1 history messages to context
2025-11-20 22:44:22 | INFO     | app.services.ai.response_handler | Sending streaming request to gpt-4o with 3 messages
2025-11-20 22:44:22 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 22:44:22 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-20 22:44:22 | INFO     | app.services.ai.response_handler | Stream created successfully, starting to yield chunks...
2025-11-20 22:44:23 | INFO     | app.services.ai.response_handler | GPT streaming completed successfully. Total chunks: 25
2025-11-20 22:44:23 | INFO     | app.services.chat_service | Sending message
2025-11-20 22:44:23 | INFO     | app.services.user_service | Tokens used: 2 by user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:44:23 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 22:44:25 | INFO     | watchfiles.main | 1 change detected
2025-11-20 22:45:57 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 22:45:57 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 22:45:57 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 22:45:57 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:45:57 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 22:45:57 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:45:57 | INFO     | app.dependencies | ‚úÖ Token check passed for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:45:57 | INFO     | tovarishbot | üì• Settings generation request from user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:45:57 | INFO     | tovarishbot | {'temperature': 0.7, 'maxLength': 'detailed', 'language': 'ru', 'withComments': True, 'codeStyle': 'clean', 'explainSteps': True, 'defaultLanguage': 'python'}
2025-11-20 22:45:57 | INFO     | app.services.ai.ai_service | üß† Generating settings for chat 688ae131-2886-4fe2-98ca-1630bd6dad3c (type: coding)
2025-11-20 22:45:57 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 22:45:58 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-11-20 22:45:58 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/threads/thread_FSWvYnr7zS8w2LU0KtOg92PN/messages "HTTP/1.1 200 OK"
2025-11-20 22:46:00 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/threads/thread_FSWvYnr7zS8w2LU0KtOg92PN/runs "HTTP/1.1 200 OK"
2025-11-20 22:46:02 | INFO     | httpx | HTTP Request: GET https://api.openai.com/v1/threads/thread_FSWvYnr7zS8w2LU0KtOg92PN/runs/run_FhWXdWMMGLQMbZcPq7wUZPmj "HTTP/1.1 200 OK"
2025-11-20 22:46:03 | INFO     | httpx | HTTP Request: GET https://api.openai.com/v1/threads/thread_FSWvYnr7zS8w2LU0KtOg92PN/runs/run_FhWXdWMMGLQMbZcPq7wUZPmj "HTTP/1.1 200 OK"
2025-11-20 22:46:04 | INFO     | httpx | HTTP Request: GET https://api.openai.com/v1/threads/thread_FSWvYnr7zS8w2LU0KtOg92PN/messages?limit=1&order=desc "HTTP/1.1 200 OK"
2025-11-20 22:46:04 | INFO     | app.services.ai.ai_service | üìù Raw AI response: {
  "temperature": 0.5,
  "maxLength": "short",
  "language": "ru"
}
2025-11-20 22:46:04 | INFO     | app.services.ai.ai_service | ‚úÖ Valid settings: {'temperature': 0.5, 'maxLength': 'short', 'language': 'ru'}
2025-11-20 22:46:05 | INFO     | httpx | HTTP Request: DELETE https://api.openai.com/v1/threads/thread_FSWvYnr7zS8w2LU0KtOg92PN "HTTP/1.1 200 OK"
2025-11-20 22:46:05 | INFO     | tovarishbot | ‚úÖ Generated settings: {'temperature': 0.5, 'maxLength': 'short', 'language': 'ru'}
2025-11-20 22:46:05 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 22:46:05 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 22:46:05 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 22:46:05 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:46:05 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 22:46:05 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:46:05 | INFO     | app.dependencies | ‚úÖ Token check passed for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:46:05 | INFO     | tovarishbot | chat type: coding, message: –∫–æ–¥ –Ω–∞ –ø–∏—Ç–æ–Ω–µ –ø—Ä–æ—Å—Ç–æ–π
2025-11-20 22:46:05 | INFO     | app.services.chat_service | Sending message
2025-11-20 22:46:05 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 22:46:05 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 22:46:05 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 22:46:05 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:46:05 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 22:46:05 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:46:05 | INFO     | app.dependencies | ‚úÖ Token check passed for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:46:05 | INFO     | app.services.chat_service | Chat 688ae131-2886-4fe2-98ca-1630bd6dad3c has 3 messages
2025-11-20 22:46:05 | INFO     | app.services.chat_service | Retrieved 3 messages for AI context, chat_id=688ae131-2886-4fe2-98ca-1630bd6dad3c
2025-11-20 22:46:05 | INFO     | tovarishbot | Chat history length: 3
2025-11-20 22:46:05 | INFO     | tovarishbot | Generating response for user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:46:05 | INFO     | app.services.ai.ai_service | Getting streaming response for message: '–∫–æ–¥ –Ω–∞ –ø–∏—Ç–æ–Ω–µ –ø—Ä–æ—Å—Ç–æ–π...'
2025-11-20 22:46:05 | INFO     | app.services.ai.response_handler | Starting streaming request: message='–∫–æ–¥ –Ω–∞ –ø–∏—Ç–æ–Ω–µ –ø—Ä–æ—Å—Ç–æ–π...', history_length=3, has_files=False
2025-11-20 22:46:05 | INFO     | app.services.ai.response_handler | AI prompt: '–¢—ã - —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—Å–∫–∏–π –º–µ–Ω—Ç–æ—Ä. –¢–í–û–Ø –ï–î–ò–ù–°–¢–í–ï–ù–ù–ê–Ø –ó–ê–î–ê–ß–ê: –ø–æ–º–æ–≥–∞—Ç—å —Å –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º. –ó–∞–¥–∞–≤–∞–π —É—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã: —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, —Ü–µ–ª—å –∫–æ–¥–∞, —É—Ä–æ–≤–µ–Ω—å –æ–ø—ã—Ç–∞. –í—Å–µ–≥–¥–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–π —Ä–∞–±–æ—á–∏–π –∫–æ–¥ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ –∏ –ø–æ—à–∞–≥–æ–≤—ã–º –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º. –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –Ω–µ –ø—Ä–æ –∫–æ–¥–∏–Ω–≥ - –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤—å –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É —á–∞—Ç—É.

üìè –î–õ–ò–ù–ê –û–¢–í–ï–¢–ê: –î–∞–≤–∞–π –∫—Ä–∞—Ç–∫–∏–µ –∏ –ª–∞–∫–æ–Ω–∏—á–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã (1-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è).

üåç –Ø–ó–´–ö: –û—Ç–≤–µ—á–∞–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.

‚öñÔ∏è –°–¢–ò–õ–¨: –ë–∞–ª–∞–Ω—Å–∏—Ä—É–π –º–µ–∂–¥—É —Ç–æ—á–Ω–æ—Å—Ç—å—é –∏ –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å—é.

üí¨ –í–ê–ñ–ù–û: –î–æ–±–∞–≤–ª—è–π –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∫–æ–¥—É –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ, –æ–±—ä—è—Å–Ω—è—è —á—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–∞–∂–¥–∞—è —á–∞—Å—Ç—å.
üßπ –ò—Å–ø–æ–ª—å–∑—É–π –ø—Ä–∏–Ω—Ü–∏–ø—ã Clean Code: –ø–æ–Ω—è—Ç–Ω—ã–µ –∏–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –∫–æ—Ä–æ—Ç–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏, –º–∏–Ω–∏–º—É–º –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è.
üíª –ò—Å–ø–æ–ª—å–∑—É–π Python –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —è–∑—ã–∫–∞ –¥–ª—è –ø—Ä–∏–º–µ—Ä–æ–≤.
üìö –û–±—ä—è—Å–Ω—è–π —Ä–µ—à–µ–Ω–∏–µ –ø–æ—à–∞–≥–æ–≤–æ: —á—Ç–æ –¥–µ–ª–∞–µ–º, –ø–æ—á–µ–º—É —Ç–∞–∫, –∫–∞–∫–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.'
2025-11-20 22:46:05 | INFO     | app.services.ai.response_handler | Adding 3 messages from chat history
2025-11-20 22:46:05 | INFO     | app.services.ai.response_handler | Added 3 history messages to context
2025-11-20 22:46:05 | INFO     | app.services.ai.response_handler | Sending streaming request to gpt-4o with 5 messages
2025-11-20 22:46:05 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 22:46:06 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-20 22:46:06 | INFO     | app.services.ai.response_handler | Stream created successfully, starting to yield chunks...
2025-11-20 22:46:11 | INFO     | app.services.ai.response_handler | GPT streaming completed successfully. Total chunks: 243
2025-11-20 22:46:11 | INFO     | app.services.chat_service | Sending message
2025-11-20 22:46:11 | INFO     | app.services.user_service | Tokens used: 2 by user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:46:11 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 22:46:39 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 22:46:39 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 22:46:39 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 22:46:39 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:46:39 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 22:46:39 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:46:39 | INFO     | app.dependencies | ‚úÖ Token check passed for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:46:39 | INFO     | tovarishbot | üì• Settings generation request from user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:46:39 | INFO     | tovarishbot | {'temperature': 0.7, 'maxLength': 'detailed', 'language': 'ru', 'withComments': True, 'codeStyle': 'clean', 'explainSteps': True, 'defaultLanguage': 'python'}
2025-11-20 22:46:39 | INFO     | app.services.ai.ai_service | üß† Generating settings for chat 688ae131-2886-4fe2-98ca-1630bd6dad3c (type: coding)
2025-11-20 22:46:39 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 22:46:40 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-11-20 22:46:40 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/threads/thread_ulwIZPKI43a90FbG6J8UXrJj/messages "HTTP/1.1 200 OK"
2025-11-20 22:46:42 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/threads/thread_ulwIZPKI43a90FbG6J8UXrJj/runs "HTTP/1.1 200 OK"
2025-11-20 22:46:43 | INFO     | httpx | HTTP Request: GET https://api.openai.com/v1/threads/thread_ulwIZPKI43a90FbG6J8UXrJj/runs/run_4xfuEJgcNGl4JsIdrYLusD9D "HTTP/1.1 200 OK"
2025-11-20 22:46:45 | INFO     | httpx | HTTP Request: GET https://api.openai.com/v1/threads/thread_ulwIZPKI43a90FbG6J8UXrJj/runs/run_4xfuEJgcNGl4JsIdrYLusD9D "HTTP/1.1 200 OK"
2025-11-20 22:46:45 | INFO     | httpx | HTTP Request: GET https://api.openai.com/v1/threads/thread_ulwIZPKI43a90FbG6J8UXrJj/messages?limit=1&order=desc "HTTP/1.1 200 OK"
2025-11-20 22:46:45 | INFO     | app.services.ai.ai_service | üìù Raw AI response: {
  "temperature": 0.7,
  "maxLength": "detailed",
  "language": "ru"
}
2025-11-20 22:46:45 | INFO     | app.services.ai.ai_service | ‚úÖ Valid settings: {'temperature': 0.7, 'maxLength': 'detailed', 'language': 'ru'}
2025-11-20 22:46:46 | INFO     | httpx | HTTP Request: DELETE https://api.openai.com/v1/threads/thread_ulwIZPKI43a90FbG6J8UXrJj "HTTP/1.1 200 OK"
2025-11-20 22:46:46 | INFO     | tovarishbot | ‚úÖ Generated settings: {'temperature': 0.7, 'maxLength': 'detailed', 'language': 'ru'}
2025-11-20 22:46:46 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 22:46:46 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 22:46:46 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 22:46:46 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:46:46 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 22:46:46 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:46:46 | INFO     | app.dependencies | ‚úÖ Token check passed for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:46:46 | INFO     | tovarishbot | chat type: coding, message: –µ—â–µ –ø–∂
2025-11-20 22:46:46 | INFO     | app.services.chat_service | Sending message
2025-11-20 22:46:46 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 22:46:46 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 22:46:46 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 22:46:46 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:46:46 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 22:46:46 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:46:46 | INFO     | app.dependencies | ‚úÖ Token check passed for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:46:46 | INFO     | app.services.chat_service | Chat 688ae131-2886-4fe2-98ca-1630bd6dad3c has 5 messages
2025-11-20 22:46:46 | INFO     | app.services.chat_service | Retrieved 5 messages for AI context, chat_id=688ae131-2886-4fe2-98ca-1630bd6dad3c
2025-11-20 22:46:46 | INFO     | tovarishbot | Chat history length: 5
2025-11-20 22:46:46 | INFO     | tovarishbot | Generating response for user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:46:46 | INFO     | app.services.ai.ai_service | Getting streaming response for message: '–µ—â–µ –ø–∂...'
2025-11-20 22:46:46 | INFO     | app.services.ai.response_handler | Starting streaming request: message='–µ—â–µ –ø–∂...', history_length=5, has_files=False
2025-11-20 22:46:46 | INFO     | app.services.ai.response_handler | AI prompt: '–¢—ã - —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—Å–∫–∏–π –º–µ–Ω—Ç–æ—Ä. –¢–í–û–Ø –ï–î–ò–ù–°–¢–í–ï–ù–ù–ê–Ø –ó–ê–î–ê–ß–ê: –ø–æ–º–æ–≥–∞—Ç—å —Å –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º. –ó–∞–¥–∞–≤–∞–π —É—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã: —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, —Ü–µ–ª—å –∫–æ–¥–∞, —É—Ä–æ–≤–µ–Ω—å –æ–ø—ã—Ç–∞. –í—Å–µ–≥–¥–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–π —Ä–∞–±–æ—á–∏–π –∫–æ–¥ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ –∏ –ø–æ—à–∞–≥–æ–≤—ã–º –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º. –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –Ω–µ –ø—Ä–æ –∫–æ–¥–∏–Ω–≥ - –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤—å –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É —á–∞—Ç—É.

üìè –î–õ–ò–ù–ê –û–¢–í–ï–¢–ê: –î–∞–≤–∞–π –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–µ –æ—Ç–≤–µ—Ç—ã —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏ –ø–æ—è—Å–Ω–µ–Ω–∏—è–º–∏.

üåç –Ø–ó–´–ö: –û—Ç–≤–µ—á–∞–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.

‚öñÔ∏è –°–¢–ò–õ–¨: –ë–∞–ª–∞–Ω—Å–∏—Ä—É–π –º–µ–∂–¥—É —Ç–æ—á–Ω–æ—Å—Ç—å—é –∏ –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å—é.

üí¨ –í–ê–ñ–ù–û: –î–æ–±–∞–≤–ª—è–π –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∫–æ–¥—É –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ, –æ–±—ä—è—Å–Ω—è—è —á—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–∞–∂–¥–∞—è —á–∞—Å—Ç—å.
üßπ –ò—Å–ø–æ–ª—å–∑—É–π –ø—Ä–∏–Ω—Ü–∏–ø—ã Clean Code: –ø–æ–Ω—è—Ç–Ω—ã–µ –∏–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –∫–æ—Ä–æ—Ç–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏, –º–∏–Ω–∏–º—É–º –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è.
üíª –ò—Å–ø–æ–ª—å–∑—É–π Python –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —è–∑—ã–∫–∞ –¥–ª—è –ø—Ä–∏–º–µ—Ä–æ–≤.
üìö –û–±—ä—è—Å–Ω—è–π —Ä–µ—à–µ–Ω–∏–µ –ø–æ—à–∞–≥–æ–≤–æ: —á—Ç–æ –¥–µ–ª–∞–µ–º, –ø–æ—á–µ–º—É —Ç–∞–∫, –∫–∞–∫–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.'
2025-11-20 22:46:46 | INFO     | app.services.ai.response_handler | Adding 5 messages from chat history
2025-11-20 22:46:46 | INFO     | app.services.ai.response_handler | Added 5 history messages to context
2025-11-20 22:46:46 | INFO     | app.services.ai.response_handler | Sending streaming request to gpt-4o with 7 messages
2025-11-20 22:46:46 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 22:46:46 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-20 22:46:46 | INFO     | app.services.ai.response_handler | Stream created successfully, starting to yield chunks...
2025-11-20 22:46:58 | INFO     | app.services.ai.response_handler | GPT streaming completed successfully. Total chunks: 372
2025-11-20 22:46:58 | INFO     | app.services.chat_service | Sending message
2025-11-20 22:46:58 | INFO     | app.services.user_service | Tokens used: 2 by user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:46:58 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 22:47:10 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 22:47:10 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 22:47:10 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 22:47:10 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:47:10 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 22:47:10 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:47:10 | INFO     | app.dependencies | ‚úÖ Token check passed for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:47:10 | INFO     | tovarishbot | üì• Settings generation request from user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:47:10 | INFO     | tovarishbot | {'temperature': 0.7, 'maxLength': 'detailed', 'language': 'ru', 'withComments': True, 'codeStyle': 'clean', 'explainSteps': True, 'defaultLanguage': 'python'}
2025-11-20 22:47:10 | INFO     | app.services.ai.ai_service | üß† Generating settings for chat 688ae131-2886-4fe2-98ca-1630bd6dad3c (type: coding)
2025-11-20 22:47:10 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 22:47:11 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-11-20 22:47:11 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/threads/thread_vOutcqWL9Ekc7bd6sktUDMUb/messages "HTTP/1.1 200 OK"
2025-11-20 22:47:14 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/threads/thread_vOutcqWL9Ekc7bd6sktUDMUb/runs "HTTP/1.1 200 OK"
2025-11-20 22:47:15 | INFO     | httpx | HTTP Request: GET https://api.openai.com/v1/threads/thread_vOutcqWL9Ekc7bd6sktUDMUb/runs/run_I5fP95sUDFOGUfuT0w8qbWhw "HTTP/1.1 200 OK"
2025-11-20 22:47:17 | INFO     | httpx | HTTP Request: GET https://api.openai.com/v1/threads/thread_vOutcqWL9Ekc7bd6sktUDMUb/runs/run_I5fP95sUDFOGUfuT0w8qbWhw "HTTP/1.1 200 OK"
2025-11-20 22:47:18 | INFO     | httpx | HTTP Request: GET https://api.openai.com/v1/threads/thread_vOutcqWL9Ekc7bd6sktUDMUb/runs/run_I5fP95sUDFOGUfuT0w8qbWhw "HTTP/1.1 200 OK"
2025-11-20 22:47:18 | INFO     | httpx | HTTP Request: GET https://api.openai.com/v1/threads/thread_vOutcqWL9Ekc7bd6sktUDMUb/messages?limit=1&order=desc "HTTP/1.1 200 OK"
2025-11-20 22:47:18 | INFO     | app.services.ai.ai_service | üìù Raw AI response: {
  "temperature": 0.7,
  "maxLength": "detailed",
  "language": "ru"
}
2025-11-20 22:47:18 | INFO     | app.services.ai.ai_service | ‚úÖ Valid settings: {'temperature': 0.7, 'maxLength': 'detailed', 'language': 'ru'}
2025-11-20 22:47:19 | INFO     | httpx | HTTP Request: DELETE https://api.openai.com/v1/threads/thread_vOutcqWL9Ekc7bd6sktUDMUb "HTTP/1.1 200 OK"
2025-11-20 22:47:19 | INFO     | tovarishbot | ‚úÖ Generated settings: {'temperature': 0.7, 'maxLength': 'detailed', 'language': 'ru'}
2025-11-20 22:47:19 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 22:47:19 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 22:47:19 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 22:47:19 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:47:19 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 22:47:19 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:47:19 | INFO     | app.dependencies | ‚úÖ Token check passed for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:47:19 | INFO     | tovarishbot | chat type: coding, message: –µ—â–µ–µ–µ
2025-11-20 22:47:19 | INFO     | app.services.chat_service | Sending message
2025-11-20 22:47:19 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 22:47:19 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 22:47:19 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 22:47:19 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:47:19 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 22:47:19 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:47:19 | INFO     | app.dependencies | ‚úÖ Token check passed for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:47:19 | INFO     | app.services.chat_service | Chat 688ae131-2886-4fe2-98ca-1630bd6dad3c has 7 messages
2025-11-20 22:47:19 | INFO     | app.services.chat_service | Retrieved 7 messages for AI context, chat_id=688ae131-2886-4fe2-98ca-1630bd6dad3c
2025-11-20 22:47:19 | INFO     | tovarishbot | Chat history length: 7
2025-11-20 22:47:19 | INFO     | tovarishbot | Generating response for user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:47:19 | INFO     | app.services.ai.ai_service | Getting streaming response for message: '–µ—â–µ–µ–µ...'
2025-11-20 22:47:19 | INFO     | app.services.ai.response_handler | Starting streaming request: message='–µ—â–µ–µ–µ...', history_length=7, has_files=False
2025-11-20 22:47:19 | INFO     | app.services.ai.response_handler | AI prompt: '–¢—ã - —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—Å–∫–∏–π –º–µ–Ω—Ç–æ—Ä. –¢–í–û–Ø –ï–î–ò–ù–°–¢–í–ï–ù–ù–ê–Ø –ó–ê–î–ê–ß–ê: –ø–æ–º–æ–≥–∞—Ç—å —Å –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º. –ó–∞–¥–∞–≤–∞–π —É—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã: —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, —Ü–µ–ª—å –∫–æ–¥–∞, —É—Ä–æ–≤–µ–Ω—å –æ–ø—ã—Ç–∞. –í—Å–µ–≥–¥–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–π —Ä–∞–±–æ—á–∏–π –∫–æ–¥ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ –∏ –ø–æ—à–∞–≥–æ–≤—ã–º –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º. –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –Ω–µ –ø—Ä–æ –∫–æ–¥–∏–Ω–≥ - –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤—å –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É —á–∞—Ç—É.

üìè –î–õ–ò–ù–ê –û–¢–í–ï–¢–ê: –î–∞–≤–∞–π –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–µ –æ—Ç–≤–µ—Ç—ã —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏ –ø–æ—è—Å–Ω–µ–Ω–∏—è–º–∏.

üåç –Ø–ó–´–ö: –û—Ç–≤–µ—á–∞–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.

‚öñÔ∏è –°–¢–ò–õ–¨: –ë–∞–ª–∞–Ω—Å–∏—Ä—É–π –º–µ–∂–¥—É —Ç–æ—á–Ω–æ—Å—Ç—å—é –∏ –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å—é.

üí¨ –í–ê–ñ–ù–û: –î–æ–±–∞–≤–ª—è–π –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∫–æ–¥—É –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ, –æ–±—ä—è—Å–Ω—è—è —á—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–∞–∂–¥–∞—è —á–∞—Å—Ç—å.
üßπ –ò—Å–ø–æ–ª—å–∑—É–π –ø—Ä–∏–Ω—Ü–∏–ø—ã Clean Code: –ø–æ–Ω—è—Ç–Ω—ã–µ –∏–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –∫–æ—Ä–æ—Ç–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏, –º–∏–Ω–∏–º—É–º –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è.
üíª –ò—Å–ø–æ–ª—å–∑—É–π Python –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —è–∑—ã–∫–∞ –¥–ª—è –ø—Ä–∏–º–µ—Ä–æ–≤.
üìö –û–±—ä—è—Å–Ω—è–π —Ä–µ—à–µ–Ω–∏–µ –ø–æ—à–∞–≥–æ–≤–æ: —á—Ç–æ –¥–µ–ª–∞–µ–º, –ø–æ—á–µ–º—É —Ç–∞–∫, –∫–∞–∫–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.'
2025-11-20 22:47:19 | INFO     | app.services.ai.response_handler | Adding 7 messages from chat history
2025-11-20 22:47:19 | INFO     | app.services.ai.response_handler | Added 7 history messages to context
2025-11-20 22:47:19 | INFO     | app.services.ai.response_handler | Sending streaming request to gpt-4o with 9 messages
2025-11-20 22:47:19 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 22:47:19 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-20 22:47:19 | INFO     | app.services.ai.response_handler | Stream created successfully, starting to yield chunks...
2025-11-20 22:47:30 | INFO     | app.services.ai.response_handler | GPT streaming completed successfully. Total chunks: 421
2025-11-20 22:47:30 | INFO     | app.services.chat_service | Sending message
2025-11-20 22:47:30 | INFO     | app.services.user_service | Tokens used: 2 by user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:47:30 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 22:48:14 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 22:48:14 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 22:48:14 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 22:48:14 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:48:14 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 22:48:14 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:48:14 | INFO     | app.dependencies | ‚úÖ Token check passed for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:48:14 | INFO     | tovarishbot | üì• Settings generation request from user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:48:14 | INFO     | tovarishbot | {'temperature': 0.7, 'maxLength': 'detailed', 'language': 'ru', 'withComments': True, 'codeStyle': 'clean', 'explainSteps': True, 'defaultLanguage': 'python'}
2025-11-20 22:48:14 | INFO     | app.services.ai.ai_service | üß† Generating settings for chat 688ae131-2886-4fe2-98ca-1630bd6dad3c (type: coding)
2025-11-20 22:48:14 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 22:48:15 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-11-20 22:48:15 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/threads/thread_rxrhh7GbgtfU7q4FSCVlIA3q/messages "HTTP/1.1 200 OK"
2025-11-20 22:48:16 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/threads/thread_rxrhh7GbgtfU7q4FSCVlIA3q/runs "HTTP/1.1 200 OK"
2025-11-20 22:48:17 | INFO     | httpx | HTTP Request: GET https://api.openai.com/v1/threads/thread_rxrhh7GbgtfU7q4FSCVlIA3q/runs/run_zF37We6Kkfwm5MwnbtTRB2hE "HTTP/1.1 200 OK"
2025-11-20 22:48:19 | INFO     | httpx | HTTP Request: GET https://api.openai.com/v1/threads/thread_rxrhh7GbgtfU7q4FSCVlIA3q/runs/run_zF37We6Kkfwm5MwnbtTRB2hE "HTTP/1.1 200 OK"
2025-11-20 22:48:19 | INFO     | httpx | HTTP Request: GET https://api.openai.com/v1/threads/thread_rxrhh7GbgtfU7q4FSCVlIA3q/messages?limit=1&order=desc "HTTP/1.1 200 OK"
2025-11-20 22:48:19 | INFO     | app.services.ai.ai_service | üìù Raw AI response: {
  "temperature": 0.7,
  "maxLength": "detailed",
  "language": "ru"
}
2025-11-20 22:48:19 | INFO     | app.services.ai.ai_service | ‚úÖ Valid settings: {'temperature': 0.7, 'maxLength': 'detailed', 'language': 'ru'}
2025-11-20 22:48:20 | INFO     | httpx | HTTP Request: DELETE https://api.openai.com/v1/threads/thread_rxrhh7GbgtfU7q4FSCVlIA3q "HTTP/1.1 200 OK"
2025-11-20 22:48:20 | INFO     | tovarishbot | ‚úÖ Generated settings: {'temperature': 0.7, 'maxLength': 'detailed', 'language': 'ru'}
2025-11-20 22:48:20 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 22:48:20 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 22:48:20 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 22:48:20 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:48:20 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 22:48:20 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:48:20 | INFO     | app.dependencies | ‚úÖ Token check passed for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:48:20 | INFO     | tovarishbot | chat type: coding, message: —Ö–º –¥–∞–≤–∞–π —Ç–µ–ø–µ—Ä—å –Ω–∞ —Å–∏ —à–∞—Ä–ø
2025-11-20 22:48:20 | INFO     | app.services.chat_service | Sending message
2025-11-20 22:48:20 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 22:48:20 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 22:48:20 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 22:48:20 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:48:20 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 22:48:20 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:48:20 | INFO     | app.dependencies | ‚úÖ Token check passed for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:48:20 | INFO     | app.services.chat_service | Chat 688ae131-2886-4fe2-98ca-1630bd6dad3c has 9 messages
2025-11-20 22:48:20 | INFO     | app.services.chat_service | Retrieved 9 messages for AI context, chat_id=688ae131-2886-4fe2-98ca-1630bd6dad3c
2025-11-20 22:48:20 | INFO     | tovarishbot | Chat history length: 9
2025-11-20 22:48:20 | INFO     | tovarishbot | Generating response for user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:48:20 | INFO     | app.services.ai.ai_service | Getting streaming response for message: '—Ö–º –¥–∞–≤–∞–π —Ç–µ–ø–µ—Ä—å –Ω–∞ —Å–∏ —à–∞—Ä–ø...'
2025-11-20 22:48:20 | INFO     | app.services.ai.response_handler | Starting streaming request: message='—Ö–º –¥–∞–≤–∞–π —Ç–µ–ø–µ—Ä—å –Ω–∞ —Å–∏ —à–∞—Ä–ø...', history_length=9, has_files=False
2025-11-20 22:48:20 | INFO     | app.services.ai.response_handler | AI prompt: '–¢—ã - —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—Å–∫–∏–π –º–µ–Ω—Ç–æ—Ä. –¢–í–û–Ø –ï–î–ò–ù–°–¢–í–ï–ù–ù–ê–Ø –ó–ê–î–ê–ß–ê: –ø–æ–º–æ–≥–∞—Ç—å —Å –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º. –ó–∞–¥–∞–≤–∞–π —É—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã: —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, —Ü–µ–ª—å –∫–æ–¥–∞, —É—Ä–æ–≤–µ–Ω—å –æ–ø—ã—Ç–∞. –í—Å–µ–≥–¥–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–π —Ä–∞–±–æ—á–∏–π –∫–æ–¥ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ –∏ –ø–æ—à–∞–≥–æ–≤—ã–º –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º. –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –Ω–µ –ø—Ä–æ –∫–æ–¥–∏–Ω–≥ - –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤—å –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É —á–∞—Ç—É.

üìè –î–õ–ò–ù–ê –û–¢–í–ï–¢–ê: –î–∞–≤–∞–π –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–µ –æ—Ç–≤–µ—Ç—ã —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏ –ø–æ—è—Å–Ω–µ–Ω–∏—è–º–∏.

üåç –Ø–ó–´–ö: –û—Ç–≤–µ—á–∞–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.

‚öñÔ∏è –°–¢–ò–õ–¨: –ë–∞–ª–∞–Ω—Å–∏—Ä—É–π –º–µ–∂–¥—É —Ç–æ—á–Ω–æ—Å—Ç—å—é –∏ –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å—é.

üí¨ –í–ê–ñ–ù–û: –î–æ–±–∞–≤–ª—è–π –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∫–æ–¥—É –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ, –æ–±—ä—è—Å–Ω—è—è —á—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–∞–∂–¥–∞—è —á–∞—Å—Ç—å.
üßπ –ò—Å–ø–æ–ª—å–∑—É–π –ø—Ä–∏–Ω—Ü–∏–ø—ã Clean Code: –ø–æ–Ω—è—Ç–Ω—ã–µ –∏–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –∫–æ—Ä–æ—Ç–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏, –º–∏–Ω–∏–º—É–º –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è.
üíª –ò—Å–ø–æ–ª—å–∑—É–π Python –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —è–∑—ã–∫–∞ –¥–ª—è –ø—Ä–∏–º–µ—Ä–æ–≤.
üìö –û–±—ä—è—Å–Ω—è–π —Ä–µ—à–µ–Ω–∏–µ –ø–æ—à–∞–≥–æ–≤–æ: —á—Ç–æ –¥–µ–ª–∞–µ–º, –ø–æ—á–µ–º—É —Ç–∞–∫, –∫–∞–∫–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.'
2025-11-20 22:48:20 | INFO     | app.services.ai.response_handler | Adding 9 messages from chat history
2025-11-20 22:48:20 | INFO     | app.services.ai.response_handler | Added 9 history messages to context
2025-11-20 22:48:20 | INFO     | app.services.ai.response_handler | Sending streaming request to gpt-4o with 11 messages
2025-11-20 22:48:20 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 22:48:21 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-20 22:48:21 | INFO     | app.services.ai.response_handler | Stream created successfully, starting to yield chunks...
2025-11-20 22:48:30 | INFO     | app.services.ai.response_handler | GPT streaming completed successfully. Total chunks: 399
2025-11-20 22:48:30 | INFO     | app.services.chat_service | Sending message
2025-11-20 22:48:30 | INFO     | app.services.user_service | Tokens used: 2 by user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:48:30 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 22:48:37 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 22:48:37 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 22:48:37 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 22:48:37 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:48:37 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 22:48:37 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:48:37 | INFO     | app.dependencies | ‚úÖ Token check passed for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:48:37 | INFO     | tovarishbot | üì• Settings generation request from user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:48:37 | INFO     | tovarishbot | {'temperature': 0.7, 'maxLength': 'detailed', 'language': 'ru', 'withComments': True, 'codeStyle': 'clean', 'explainSteps': True, 'defaultLanguage': 'python'}
2025-11-20 22:48:37 | INFO     | app.services.ai.ai_service | üß† Generating settings for chat 688ae131-2886-4fe2-98ca-1630bd6dad3c (type: coding)
2025-11-20 22:48:37 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 22:48:38 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-11-20 22:48:38 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/threads/thread_lyRux22ZzrV2jYZd9gGzmPmE/messages "HTTP/1.1 200 OK"
2025-11-20 22:48:40 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/threads/thread_lyRux22ZzrV2jYZd9gGzmPmE/runs "HTTP/1.1 200 OK"
2025-11-20 22:48:42 | INFO     | httpx | HTTP Request: GET https://api.openai.com/v1/threads/thread_lyRux22ZzrV2jYZd9gGzmPmE/runs/run_5CQlpj48vOHb5ZD4cTPd2lJ0 "HTTP/1.1 200 OK"
2025-11-20 22:48:43 | INFO     | httpx | HTTP Request: GET https://api.openai.com/v1/threads/thread_lyRux22ZzrV2jYZd9gGzmPmE/runs/run_5CQlpj48vOHb5ZD4cTPd2lJ0 "HTTP/1.1 200 OK"
2025-11-20 22:48:43 | INFO     | httpx | HTTP Request: GET https://api.openai.com/v1/threads/thread_lyRux22ZzrV2jYZd9gGzmPmE/messages?limit=1&order=desc "HTTP/1.1 200 OK"
2025-11-20 22:48:43 | INFO     | app.services.ai.ai_service | üìù Raw AI response: {
  "temperature": 0.7,
  "maxLength": "detailed",
  "language": "ru"
}
2025-11-20 22:48:43 | INFO     | app.services.ai.ai_service | ‚úÖ Valid settings: {'temperature': 0.7, 'maxLength': 'detailed', 'language': 'ru'}
2025-11-20 22:48:44 | INFO     | httpx | HTTP Request: DELETE https://api.openai.com/v1/threads/thread_lyRux22ZzrV2jYZd9gGzmPmE "HTTP/1.1 200 OK"
2025-11-20 22:48:44 | INFO     | tovarishbot | ‚úÖ Generated settings: {'temperature': 0.7, 'maxLength': 'detailed', 'language': 'ru'}
2025-11-20 22:48:44 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 22:48:44 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 22:48:44 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 22:48:44 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:48:44 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 22:48:44 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:48:44 | INFO     | app.dependencies | ‚úÖ Token check passed for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:48:44 | INFO     | tovarishbot | chat type: coding, message: –∞ –Ω–∞ –ø–ª—é—Å–∞—Ö
2025-11-20 22:48:44 | INFO     | app.services.chat_service | Sending message
2025-11-20 22:48:44 | INFO     | app.services.image_service | ‚úÖ Image directories created: uploads\generated-images
2025-11-20 22:48:44 | INFO     | app.dependencies | üîê Authenticating user with JWT token
2025-11-20 22:48:44 | INFO     | app.dependencies | scheme='Bearer' credentials='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiZDI1ZGY1MzgtOWExMC00Y2U3LTk2MTMtNWJkNGM2NWM0OWUyIiwidGVsZWdyYW1faWQiOjE4NDkyODU1NDgsInN1YnNjcmlwdGlvbl90eXBlIjoiZnJlZSIsImlhdCI6MTc2MzY1ODQ0MCwiZXhwIjoxNzY0MjYzMjQwLCJpc3MiOiJ0b3ZhcmlzaGJvdCIsImF1ZCI6InRvdmFyaXNoYm90LXVzZXJzIn0.8bMZP483Atufso7enIjc4R-A9lOqDm77N1xIkeslFIE'
2025-11-20 22:48:44 | INFO     | app.auth | ‚úÖ JWT token verified for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:48:44 | INFO     | app.dependencies | üîç Looking for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2 (telegram_id: 1849285548)
2025-11-20 22:48:44 | INFO     | app.dependencies | ‚úÖ User authenticated successfully: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:48:44 | INFO     | app.dependencies | ‚úÖ Token check passed for user: d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:48:44 | INFO     | app.services.chat_service | Chat 688ae131-2886-4fe2-98ca-1630bd6dad3c has 11 messages
2025-11-20 22:48:44 | INFO     | app.services.chat_service | Retrieved 11 messages for AI context, chat_id=688ae131-2886-4fe2-98ca-1630bd6dad3c
2025-11-20 22:48:44 | INFO     | tovarishbot | Chat history length: 11
2025-11-20 22:48:44 | INFO     | tovarishbot | Generating response for user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:48:44 | INFO     | app.services.ai.ai_service | Getting streaming response for message: '–∞ –Ω–∞ –ø–ª—é—Å–∞—Ö...'
2025-11-20 22:48:44 | INFO     | app.services.ai.response_handler | Starting streaming request: message='–∞ –Ω–∞ –ø–ª—é—Å–∞—Ö...', history_length=11, has_files=False
2025-11-20 22:48:44 | INFO     | app.services.ai.response_handler | AI prompt: '–¢—ã - —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—Å–∫–∏–π –º–µ–Ω—Ç–æ—Ä. –¢–í–û–Ø –ï–î–ò–ù–°–¢–í–ï–ù–ù–ê–Ø –ó–ê–î–ê–ß–ê: –ø–æ–º–æ–≥–∞—Ç—å —Å –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º. –ó–∞–¥–∞–≤–∞–π —É—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã: —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, —Ü–µ–ª—å –∫–æ–¥–∞, —É—Ä–æ–≤–µ–Ω—å –æ–ø—ã—Ç–∞. –í—Å–µ–≥–¥–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–π —Ä–∞–±–æ—á–∏–π –∫–æ–¥ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ –∏ –ø–æ—à–∞–≥–æ–≤—ã–º –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º. –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –Ω–µ –ø—Ä–æ –∫–æ–¥–∏–Ω–≥ - –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤—å –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É —á–∞—Ç—É.

üìè –î–õ–ò–ù–ê –û–¢–í–ï–¢–ê: –î–∞–≤–∞–π –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–µ –æ—Ç–≤–µ—Ç—ã —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏ –ø–æ—è—Å–Ω–µ–Ω–∏—è–º–∏.

üåç –Ø–ó–´–ö: –û—Ç–≤–µ—á–∞–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.

‚öñÔ∏è –°–¢–ò–õ–¨: –ë–∞–ª–∞–Ω—Å–∏—Ä—É–π –º–µ–∂–¥—É —Ç–æ—á–Ω–æ—Å—Ç—å—é –∏ –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å—é.

üí¨ –í–ê–ñ–ù–û: –î–æ–±–∞–≤–ª—è–π –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∫–æ–¥—É –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ, –æ–±—ä—è—Å–Ω—è—è —á—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–∞–∂–¥–∞—è —á–∞—Å—Ç—å.
üßπ –ò—Å–ø–æ–ª—å–∑—É–π –ø—Ä–∏–Ω—Ü–∏–ø—ã Clean Code: –ø–æ–Ω—è—Ç–Ω—ã–µ –∏–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –∫–æ—Ä–æ—Ç–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏, –º–∏–Ω–∏–º—É–º –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è.
üíª –ò—Å–ø–æ–ª—å–∑—É–π Python –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —è–∑—ã–∫–∞ –¥–ª—è –ø—Ä–∏–º–µ—Ä–æ–≤.
üìö –û–±—ä—è—Å–Ω—è–π —Ä–µ—à–µ–Ω–∏–µ –ø–æ—à–∞–≥–æ–≤–æ: —á—Ç–æ –¥–µ–ª–∞–µ–º, –ø–æ—á–µ–º—É —Ç–∞–∫, –∫–∞–∫–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.'
2025-11-20 22:48:44 | INFO     | app.services.ai.response_handler | Adding 11 messages from chat history
2025-11-20 22:48:44 | INFO     | app.services.ai.response_handler | Added 11 history messages to context
2025-11-20 22:48:44 | INFO     | app.services.ai.response_handler | Sending streaming request to gpt-4o with 13 messages
2025-11-20 22:48:44 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 22:48:44 | INFO     | httpx | HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-20 22:48:44 | INFO     | app.services.ai.response_handler | Stream created successfully, starting to yield chunks...
2025-11-20 22:48:56 | INFO     | app.services.ai.response_handler | GPT streaming completed successfully. Total chunks: 505
2025-11-20 22:48:56 | INFO     | app.services.chat_service | Sending message
2025-11-20 22:48:56 | INFO     | app.services.user_service | Tokens used: 2 by user d25df538-9a10-4ce7-9613-5bd4c65c49e2
2025-11-20 22:48:56 | INFO     | watchfiles.main | 3 changes detected
2025-11-20 22:49:06 | INFO     | watchfiles.main | 1 change detected
2025-11-20 22:49:21 | INFO     | watchfiles.main | 1 change detected
2025-11-20 22:49:21 | INFO     | app.startup | üõë Shutting down –¢–æ–≤–∞—Ä–∏—â–ë–æ—Ç Backend...
2025-11-20 22:49:21 | INFO     | app.tasks.image_cleanup_task | ‚úÖ Image cleanup scheduler stopped
2025-11-20 22:49:21 | INFO     | app.startup | ‚úÖ Image cleanup scheduler stopped
2025-11-20 22:49:21 | INFO     | app.startup | ‚úÖ –¢–æ–≤–∞—Ä–∏—â–ë–æ—Ç Backend shutdown complete!
2025-11-20 22:49:21 | INFO     | apscheduler.scheduler | Scheduler has been shut down
